import{o as v,c as y,d as l,C as p,r as k,s as $,a as m,b as d,t as _,f,n as A,m as D,i as w,a6 as h}from"./app.cf37a944.js";import{_ as I}from"./CustomTable.e53640e8.js";import{_ as O}from"./_plugin-vue_export-helper.cdc0426e.js";import{b as S,Z as x}from"./atmosphere-ui.df5681b0.js";import{p as M}from"./index.b7b51b28.js";import{ab as N,af as b,a6 as E}from"./naiveui.c9ccbfb7.js";import{s as g}from"./index.0a3d776d.js";import{f as B}from"./formatMoney.a91b934f.js";import{N as R}from"./Dropdown.17f7f788.js";function z(e,t){N(2,arguments);var a=b(e),r=b(t);return a.getTime()>r.getTime()}const H={name:"IcSharpSyncAlt"},P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 24 24"},W=l("path",{fill:"currentColor",d:"m18 12l4-4l-4-4v3H3v2h15zM6 12l-4 4l4 4v-3h15v-2H6z"},null,-1),j=[W];function V(e,t,a,r,s,o){return v(),y("svg",P,j)}const L=O(H,[["render",V]]),Z={WITHDRAW:"outflow",DEPOSIT:"inflow"},q=[{label:"Date",name:"date",width:200,class:"text-center",headerClass:"text-center",render(e){const t=M(e.date),a=z(g(t),g(new Date));return p("div",{class:a?"text-danger":"text-info cursor-pointer"},E(t,"dd MMM, yyyy"))}},{label:"Payee",name:"payee",width:400,class:"w-full",render(e){var t,a;try{const r=()=>{var s;return[p("div",`Transfer: ${(s=e.counterAccount)==null?void 0:s.name}`),p(L,{class:"fa fa-right-left"})]};return(a=(t=e.payee)==null?void 0:t.name)!=null?a:p("div",{class:"flex justify-between items-center text-body-1 h-4"},r)}catch{return""}}},{label:"Category",name:"category",render(e){var t;return(t=e.category)==null?void 0:t.name}},{label:"Description",name:"description",width:300},{label:"Type",name:"direction",width:300,class:"text-center",headerClass:"text-center",render(e){return Z[e.direction]}},{label:"Amount",name:"total",type:"custom",class:"text-right",headerClass:"text-right"},{label:"Status",name:"status",width:200,class:"py-1 flex items-center justify-center",headerClass:"text-center",render(e){const t={draft:"secondary",planned:"warning",verified:"success"};return()=>p(S,{type:t[e.status]},()=>e.status)}},{label:"",name:"actions",width:300,type:"custom",class:"text-right"}],F={class:"pb-20 mt-5 bg-base-lvl-3"},Y={class:"capitalize text-xs"},G=l("button",{class:"hover:bg-base-lvl-3 px-2"},[l("i",{class:"fa fa-ellipsis-v"})],-1),de={__name:"TransactionTemplate",props:{transactions:{type:Array,default:()=>[]},serverSearchOptions:{type:Object,default:()=>({})},title:{type:String,default:"s"},cols:{type:Array,default(){return q}}},emits:["removed","edit","approved"],setup(e,{emit:t}){const a=k(!1),r=$({recurrence:!1,automatic:!1,transactionData:null}),s=i=>{r.transactionData=i,a.value=!0},o=i=>[{name:"edit",label:"Edit"},{name:"removed",label:"Remove"},{name:"findLinked",label:"Find Linked",hide:i.status!="draft"}].filter(n=>!n.hide),u=(i,c)=>{t(i,c)},C=i=>{var c;return(c=i.payee)!=null&&c.name?i.direction=="WITHDRAW"?"text-red-400":"text-green-500":"text-body-1"};return(i,c)=>(v(),y("div",F,[m(I,{cols:e.cols,"show-prepend":!0,"table-data":e.transactions,onEdit:s},{total:d(({scope:{row:n}})=>[l("div",{class:A(["font-bold",[C(n)]])},_(f(B)(n.total,n.currency_code)),3)]),description:d(({scope:{row:n}})=>[l("span",Y,_(n.description)+" "+_(n.linked),1)]),actions:d(({scope:{row:n}})=>[l("div",null,[m(f(R),{trigger:"click","key-field":"name",options:o(n),"on-select":T=>u(T,n),onClick:c[0]||(c[0]=D(()=>{},["stop"]))},{default:d(()=>[G]),_:2},1032,["options","on-select"])])]),_:1},8,["cols","table-data"])]))}},J={class:"flex items-center w-full space-x-2"},K=l("i",{class:"block mr-2 fa fa-check"},null,-1),Q=w(" Approve "),U=l("i",{class:"block mr-2 fa fa-times"},null,-1),X=w(" Remove"),ee=l("i",{class:"block fa fa-robot"},null,-1),pe={__name:"DraftButtons",setup(e){const t=()=>{axios.post("/api/automation/run-all").then(s=>{console.log(s.data)}).catch(s=>{console.log(s)})},a=()=>{h.Inertia.post("/transactions/remove-all-drafts").then(s=>{h.Inertia.reload()})},r=s=>{h.Inertia.post("/transactions/approve-all-drafts").then(()=>{h.Inertia.reload()})};return(s,o)=>(v(),y("div",J,[m(f(x),{class:"flex items-center h-10 space-x-2 text-primary",rounded:"",onClick:o[0]||(o[0]=u=>r())},{default:d(()=>[K,Q]),_:1}),m(f(x),{class:"flex items-center h-10 mr-2 space-x-2 text-primary",rounded:"",onClick:o[1]||(o[1]=u=>a())},{default:d(()=>[U,X]),_:1}),m(f(x),{class:"flex items-center h-10 space-x-2 text-white bg-primary",rounded:"",onClick:o[2]||(o[2]=u=>t())},{default:d(()=>[ee]),_:1})]))}};export{L as I,pe as _,de as a,z as i};
