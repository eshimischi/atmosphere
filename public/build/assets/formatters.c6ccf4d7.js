import{e as R}from"./exact-math.node.e09155e2.js";import{f as $}from"./formatMoney.228f3112.js";import{_ as P}from"./NumberHider.fca52128.js";import{N as D}from"./Progress.a2d4318a.js";import{c as b,o as r,a as i,b as s,i as h,t as v,d as C,f as M,u as p,y as A,h as E,w as T,g as j,F as w,e as V,k as I,z as F}from"./app.c4e32cc5.js";import{_ as L}from"./SectionTitle.fa46b1f1.js";const U={class:"flex justify-between px-5 py-2"},z={class:"flex space-x-3"},H={key:0,class:"flex items-center h-full"},Z=["checked"],G={class:"flex items-center justify-center w-20 px-5 py-3 font-bold text-center transition-all rounded-md bg-slate-400 group-hover:bg-pink-400 group-hover:text-white"},O={class:"font-bold"},X={class:"text-sm"},Y={class:"block text-sm"},q={class:"flex space-x-5"},J={class:"text-right"},K={class:"relative font-bold"},Q={key:0,class:"text-red-500"},W={class:"text-sm"},_={key:0,class:"px-5"},ee={props:{title:String,subtitle:String,date:String,value:String,currencyCode:String,currencyCode:String,status:String,markAsPaid:Boolean,markAsApproved:Boolean,expenses:Number,allowRemove:Boolean,allowSelect:Boolean,isSelected:Boolean},emits:["selected"],setup(e,{emit:t}){const l=e,o=b(()=>(Number(l.expenses||0)/Number(l.value||0)*100).toFixed(2)),a=()=>{l.allowSelect&&t("selected")};return(y,f)=>(r(),i("div",{class:A(["text-gray-100 transition group",[e.allowSelect&&"cursor-pointer hover:bg-gray-500 border-2 border-transparent hover:border-pink-400",e.isSelected?"odd:bg-pink-100 even:bg-pink-200":"odd:bg-slate-600 even:bg-slate-100"]]),onClick:a},[s("div",U,[s("div",z,[e.allowSelect?(r(),i("div",H,[s("input",{type:"checkbox",checked:e.isSelected},null,8,Z)])):h("",!0),s("div",G,v(e.title.slice(0,1)),1),s("div",null,[s("h4",O,v(e.title),1),s("small",X,v(e.subtitle),1),s("small",Y,v(e.date),1)])]),s("div",q,[s("div",J,[s("h4",K,[C(P),M(" "+v(p($)(e.value,e.currencyCode))+" ",1),e.expenses?(r(),i("span",Q,"("+v(p($)(e.expenses,e.currencyCode))+")",1)):h("",!0)]),s("small",W,v(e.status),1)]),e.markAsPaid?(r(),i("div",{key:0,class:"font-bold text-pink-500 cursor-pointer",onClick:f[0]||(f[0]=k=>y.$emit("paid-clicked"))}," Mark as Paid ")):h("",!0),e.markAsApproved?(r(),i("div",{key:1,class:"font-bold text-pink-500 cursor-pointer",onClick:f[1]||(f[1]=k=>y.$emit("approved"))}," Approve ")):h("",!0),e.allowRemove?(r(),i("div",{key:2,class:"font-bold text-pink-500 cursor-pointer",onClick:f[2]||(f[2]=k=>y.$emit("removed"))}," Remove ")):h("",!0)])]),e.expenses?(r(),i("div",_,[C(p(D),{percentage:p(o),"stroke-width":1,height:"2px","border-radius":"0"},null,8,["percentage"])])):h("",!0)],2))}},te={class:"flex justify-between"},se={class:"flex items-center justify-end w-full"},le={key:0,class:"flex items-center justify-between px-4 py-5 bg-slate-600 text-white"},oe=s("div",{class:"font-bold"},"Selected Items sum",-1),ae={class:"space-y-1 text-right"},ne={key:1,class:"items-center justify-center px-5 py-6 text-center text-gray-600"},de=s("div",{class:"mx-auto text-6xl"},[s("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"mx-auto iconify iconify--iconoir",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[s("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[s("path",{d:"M7 2h9.5L21 6.5V19"}),s("path",{d:"M3 20.5v-14A1.5 1.5 0 0 1 4.5 5h9.752a.6.6 0 0 1 .424.176l3.148 3.148A.6.6 0 0 1 18 8.75V20.5a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 3 20.5Z"}),s("path",{fill:"currentColor",d:"M14 8.4V5.354a.354.354 0 0 1 .604-.25l3.292 3.292a.353.353 0 0 1-.25.604H14.6a.6.6 0 0 1-.6-.6Z"})])])],-1),re=s("span",{class:"mt-10 text-lg font-bold"}," No transactions found ",-1),ie=[de,re],be={props:{classes:{type:String,default:"mt-1"},tableClass:{type:String,default:"mt-2 bg-slate-600 border border-slate-800 rounded-lg shadow-md"},tableLabel:{type:String,default:""},transactions:{type:Array,default(){return[]}},parser:{type:[Function,null],default:null},showSum:{type:Boolean,default:!1},allowMarkAsPaid:{type:Boolean,default:!1},allowMarkAsApproved:{type:Boolean,default:!1},allowRemove:{type:Boolean,default:!1},allowSelect:{type:Boolean,default:!1}},emits:["update:selected","edit","paid-clicked","approved","removed"],setup(e,{emit:t}){const l=e,o=b(()=>l.parser?l.parser(l.transactions):l.transactions),a=E([]),y=d=>a.includes(d.id||d.title),f=d=>{if(l.allowSelect){const m=d.id||d.title;y(d)?a.splice(a.indexOf(m),1):a.push(m)}t("update:selected",a)},k=b(()=>B(a));b(()=>B(o.value.map(d=>d.id)));const B=d=>d.reduce((m,c)=>{const u=o.value.find(g=>g.id===c||g.title===c);return u&&(m[u.currencyCode]?m[u.currencyCode]=R.add(m[u.currencyCode],u.value):m[u.currencyCode]=R.add(0,u.value)),m},{});return(d,m)=>(r(),i("div",{class:A([e.classes,"overflow-hidden"])},[s("div",te,[C(L,{type:"secondary",class:"w-full"},{default:T(()=>[M(v(e.tableLabel),1)]),_:1}),s("div",se,[j(d.$slots,"action")])]),s("div",{class:A([e.tableClass,"overflow-hidden border-slate-800"])},[p(o).length?(r(),i(w,{key:0},[(r(!0),i(w,null,V(p(o),(c,u)=>(r(),I(ee,F(c,{"mark-as-paid":e.allowMarkAsPaid,"mark-as-approved":e.allowMarkAsApproved,"allow-remove":e.allowRemove,"allow-select":e.allowSelect,key:c.id,isSelected:y(c),class:"odd:bg-slate-600 even:bg-slate-500",onSelected:g=>f(c),onPaidClicked:g=>d.$emit("paid-clicked",c),onApproved:g=>d.$emit("approved",c),onRemoved:g=>d.$emit("removed",c),onDblclick:g=>d.$emit("edit",e.transactions[u])}),null,16,["mark-as-paid","mark-as-approved","allow-remove","allow-select","isSelected","onSelected","onPaidClicked","onApproved","onRemoved","onDblclick"]))),128)),e.showSum?(r(),i("div",le,[oe,s("div",ae,[(r(!0),i(w,null,V(p(k),(c,u)=>(r(),i("div",null,v(p($)(c,u)),1))),256))])])):h("",!0)],64)):(r(),i("div",ne,ie))],2)],2))}};var x,ce=new Uint8Array(16);function ue(){if(!x&&(x=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(ce)}var me=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ve(e){return typeof e=="string"&&me.test(e)}var n=[];for(var S=0;S<256;++S)n.push((S+256).toString(16).substr(1));function fe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase();if(!ve(l))throw TypeError("Stringified UUID is invalid");return l}function N(e,t,l){e=e||{};var o=e.random||(e.rng||ue)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){l=l||0;for(var a=0;a<16;++a)t[l+a]=o[a];return t}return fe(o)}const we=e=>e.map(t=>{var l,o,a;return{id:t.id||N(),date:t.date,title:t.description,subtitle:(l=t.account)!=null&&l.name?`${(o=t.account)==null?void 0:o.name} -> ${(a=t.category)==null?void 0:a.name}`:"",value:t.total,status:"VERIFIED",currencyCode:t.currency_code}}),Se=e=>e.map(t=>{var l,o,a;return{id:t.transaction_category_id||N(),date:t.date||"",title:t.name,subtitle:(l=t==null?void 0:t.account)!=null&&l.name?`${(o=t.account)==null?void 0:o.name} -> ${(a=t.category)==null?void 0:a.name}`:"",value:t.total,status:"VERIFIED",currencyCode:t.currency_code}}),$e=e=>(console.log(e,"data"),e.map(t=>({id:t.id,date:t.date,title:t.description,subtitle:`${t.account.name} -> ${t.category.name} `,value:t.total,status:"PLANNED"})));export{be as _,Se as c,$e as p,we as t};
