import{e as V}from"./exact-math.node.76a9c4c7.js";import{f as R}from"./formatMoney.228f3112.js";import{q as h,o as i,c as m,d as l,e as p,t as v,a as E,i as N,f as u,g as $,b as g,m as P,n as S,k as M,s as D,F as A,h as T,y as I}from"./app.8c4d85cf.js";import{_ as O,N as F}from"./NumberHider.639f1aa6.js";import{N as L}from"./Progress.3b26e3d7.js";import{f as _}from"./index.082e1a14.js";import{p as U}from"./index.468785f8.js";import{_ as H}from"./SectionTitle.b84dbd6d.js";import{a as Z}from"./atmosphere-ui.es.4435c64a.js";const q={class:"flex justify-between px-5 py-2"},z={class:"flex space-x-3"},G={key:0,class:"flex items-center h-full"},X=["checked"],Y={class:"flex items-center justify-center w-20 px-5 py-3 font-bold text-center transition-all rounded-md bg-base-lvl-3 group-hover:bg-primary group-hover:text-white group-body-1"},J={class:"font-bold"},K={class:"text-sm"},Q={class:"block text-sm"},W={class:"flex space-x-5"},ee={class:"text-right"},te={class:"relative font-bold"},se={key:0,class:"text-red-500"},le={class:"text-sm"},ae=l("button",{class:"hover:bg-base-lvl-3 px-2"},[l("i",{class:"fa fa-ellipsis-v"})],-1),oe={key:0,class:"px-5"},ne={__name:"TransactionCard",props:{title:String,subtitle:String,date:String,value:String,currencyCode:String,status:String,markAsPaid:Boolean,markAsApproved:Boolean,expenses:Number,allowEdit:Boolean,allowRemove:Boolean,allowSelect:Boolean,isSelected:Boolean},emits:["selected","remove"],setup(e,{emit:t}){const s=e,o=h(()=>(Number(s.expenses||0)/Number(s.value||0)*100).toFixed(2)),n=()=>{s.allowSelect&&t("selected")},b=a=>a&&_(U(a+"T00:00:00"),"MMM dd, yyyy"),w=h(()=>[{name:"edit",label:"Edit",hide:!s.allowEdit},{name:"markAsPaid",label:"Mark as paid",hide:!s.markAsPaid},{name:"approved",label:"Approve",hide:!s.markAsApproved},{name:"removed",label:"Remove",hide:!s.allowRemove}].filter(r=>!r.hide)),C=h(()=>Object.keys(w.value).length),x=a=>{t(a)};return(a,r)=>(i(),m("div",{class:S(["transition text-slate-body group",[e.allowSelect&&"cursor-pointer hover:bg-base-lvl-3 border-2 border-transparent hover:border-primary",e.isSelected?"odd:bg-primary-100 even:bg-primary":"odd:bg-base-lvl-2 even:bg-base-lvl-1"]])},[l("div",q,[l("div",z,[e.allowSelect?(i(),m("div",G,[l("input",{type:"checkbox",checked:e.isSelected,onChange:r[0]||(r[0]=c=>n())},null,40,X)])):p("",!0),l("div",Y,v(e.title.slice(0,1)),1),l("div",null,[l("h4",J,v(e.title),1),l("small",K,v(e.subtitle),1),l("small",Q,v(b(e.date)),1)])]),l("div",W,[l("div",ee,[l("h4",te,[E(O),N(" "+v(u(R)(e.value,e.currencyCode))+" ",1),e.expenses?(i(),m("span",se,"("+v(u(R)(e.expenses,e.currencyCode))+")",1)):p("",!0)]),l("small",le,v(e.status),1)]),u(C)?(i(),$(u(F),{key:0,trigger:"click","key-field":"name",options:u(w),"on-select":x,onClick:r[1]||(r[1]=P(()=>{},["stop"]))},{default:g(()=>[ae]),_:1},8,["options"])):p("",!0)])]),e.expenses?(i(),m("div",oe,[E(u(L),{percentage:u(o),"stroke-width":1,height:"2px","border-radius":"0"},null,8,["percentage"])])):p("",!0)],2))}},de={class:"flex justify-between"},re={class:"flex items-center justify-end w-full"},ie={__name:"SectionCard",props:{classes:{type:String,default:"mt-1"},cardClass:{type:String,default:"mt-2 bg-base-lvl-3 border border-base rounded-lg shadow-md"},sectionTitle:{type:String,default:""},action:{type:[Object,null]}},emits:["action"],setup(e){return(t,s)=>(i(),m("div",{class:S([e.classes,"overflow-hidden text-body-1"])},[l("div",de,[E(H,{type:"secondary",class:"w-full"},{default:g(()=>[N(v(e.sectionTitle),1)]),_:1}),l("div",re,[e.action||t.$slots.action?M(t.$slots,"action",{key:0},()=>[e.action?(i(),$(u(Z),{key:0,class:"flex items-center text-primary",onClick:s[0]||(s[0]=o=>t.$emit("action"))},{default:g(()=>[l("span",null,v(e.action.label),1),e.action.iconClass?(i(),m("i",{key:0,class:S(["ml-2",e.action.iconClass])},null,2)):p("",!0)]),_:1})):p("",!0)]):p("",!0)])]),l("div",{class:S([e.cardClass,"overflow-hidden border-base"])},[M(t.$slots,"default")],2)],2))}},ce={key:0,class:"flex items-center justify-between px-4 py-5 bg-base-lvl-1 text-body-1"},ue=l("div",{class:"font-bold"},"Selected Items sum",-1),me={class:"space-y-1 text-right"},fe={key:1,class:"items-center justify-center px-5 py-6 text-center text-gray-600"},ve=l("div",{class:"mx-auto text-6xl"},[l("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"mx-auto iconify iconify--iconoir",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[l("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[l("path",{d:"M7 2h9.5L21 6.5V19"}),l("path",{d:"M3 20.5v-14A1.5 1.5 0 0 1 4.5 5h9.752a.6.6 0 0 1 .424.176l3.148 3.148A.6.6 0 0 1 18 8.75V20.5a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 3 20.5Z"}),l("path",{fill:"currentColor",d:"M14 8.4V5.354a.354.354 0 0 1 .604-.25l3.292 3.292a.353.353 0 0 1-.25.604H14.6a.6.6 0 0 1-.6-.6Z"})])])],-1),pe=l("span",{class:"mt-10 text-lg font-bold"}," No transactions found ",-1),ye=[ve,pe],Ve={__name:"TransactionsTable",props:{classes:{type:String,default:"mt-1"},tableClass:{type:String,default:"mt-2 bg-base-lvl-1 border border-base-deep-1 rounded-lg shadow-md"},tableLabel:{type:String,default:""},transactions:{type:Array,default(){return[]}},parser:{type:[Function,null],default:null},showSum:{type:Boolean,default:!1},allowMarkAsPaid:{type:Boolean,default:!1},allowMarkAsApproved:{type:Boolean,default:!1},allowRemove:{type:Boolean,default:!1},allowSelect:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!1}},emits:["update:selected","edit","paid-clicked","approved","removed"],setup(e,{emit:t}){const s=e,o=h(()=>s.parser?s.parser(s.transactions):s.transactions),n=D([]),b=a=>n.includes(a.id||a.title),w=a=>{if(s.allowSelect){const r=a.id||a.title;b(a)?n.splice(n.indexOf(r),1):n.push(r)}t("update:selected",n)},C=h(()=>x(n));h(()=>x(o.value.map(a=>a.id)));const x=a=>a.reduce((r,c)=>{const f=o.value.find(y=>y.id===c||y.title===c);return f&&(r[f.currencyCode]?r[f.currencyCode]=V.add(r[f.currencyCode],f.value):r[f.currencyCode]=V.add(0,f.value)),r},{});return(a,r)=>(i(),$(ie,{classes:e.classes,"section-title":e.tableLabel,"card-class":e.tableClass},{action:g(()=>[M(a.$slots,"action")]),default:g(()=>[l("div",null,[u(o).length?(i(),m(A,{key:0},[(i(!0),m(A,null,T(u(o),(c,f)=>(i(),$(ne,I(c,{"mark-as-paid":e.allowMarkAsPaid,"mark-as-approved":e.allowMarkAsApproved,"allow-remove":e.allowRemove,"allow-select":e.allowSelect,"allow-edit":e.allowEdit,key:c.id,isSelected:b(c),class:"odd:bg-base-lvl-1 even:bg-base-lvl-2",onSelected:y=>w(c),onPaidClicked:y=>a.$emit("paid-clicked",c),onApproved:y=>a.$emit("approved",c),onRemoved:y=>a.$emit("removed",c),onEdit:y=>a.$emit("edit",e.transactions[f])}),null,16,["mark-as-paid","mark-as-approved","allow-remove","allow-select","allow-edit","isSelected","onSelected","onPaidClicked","onApproved","onRemoved","onEdit"]))),128)),e.showSum?(i(),m("div",ce,[ue,l("div",me,[(i(!0),m(A,null,T(u(C),(c,f)=>(i(),m("div",null,v(u(R)(c,f)),1))),256))])])):p("",!0)],64)):(i(),m("div",fe,ye))])]),_:3},8,["classes","section-title","card-class"]))}};var k,he=new Uint8Array(16);function ge(){if(!k&&(k=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!k))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return k(he)}const be=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function we(e){return typeof e=="string"&&be.test(e)}var d=[];for(var B=0;B<256;++B)d.push((B+256).toString(16).substr(1));function xe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]).toLowerCase();if(!we(s))throw TypeError("Stringified UUID is invalid");return s}function j(e,t,s){e=e||{};var o=e.random||(e.rng||ge)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){s=s||0;for(var n=0;n<16;++n)t[s+n]=o[n];return t}return xe(o)}const Te=e=>e.map(t=>{var s,o,n;return{id:t.id||j(),date:t.date,title:t.description,subtitle:(s=t.account)!=null&&s.name?`${(o=t.account)==null?void 0:o.name} -> ${(n=t.category)==null?void 0:n.name}`:"",value:t.total,status:"VERIFIED",currencyCode:t.currency_code}}),Ne=e=>e.map(t=>{var s,o,n;return{id:t.transaction_category_id||j(),date:t.date||"",title:t.name,subtitle:(s=t==null?void 0:t.account)!=null&&s.name?`${(o=t.account)==null?void 0:o.name} -> ${(n=t.category)==null?void 0:n.name}`:"",value:t.total,status:"VERIFIED",currencyCode:t.currency_code}});export{Ve as _,ie as a,Ne as c,Te as t};
