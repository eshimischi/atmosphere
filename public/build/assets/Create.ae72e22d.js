import{i as c,Z as k}from"./atmosphere-ui.588c294c.js";import{e as v,_}from"./AppLayout.cd77f56f.js";import{o as m,c as p,a,b as l,f as i,t as h,g as $,d as x,u as w,F,h as C,H as U,r as q,q as B,i as N}from"./app.cefd7668.js";import{_ as y}from"./LogerInput.bec0734e.js";import{_ as j,a as O}from"./MealSectionNav.948f5b10.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./index.de789d8e.js";import"./Modal.a2277346.js";/* empty css                                              */import"./SectionTitle.23b660a7.js";import"./ImportResourceModal.ab0a2563.js";import"./LogerButton.0789417e.js";import"./SectionNav.d2e4d6cd.js";const I={class:"flex px-2 py-2 overflow-hidden rounded-md bg-base-lvl-3"},L={key:0,class:"capitalize"},M=x("i",{class:"fa fa-trash"},null,-1),S={__name:"MealFormLine",props:{meal:{type:Object,default:()=>({name:""})},ingredient:{type:Object,required:!0},index:{type:Number}},emits:["close"],setup(n){return(s,e)=>(m(),p("div",I,[a(i(c),{class:"px-4",label:"Qty"},{default:l(()=>[a(y,{bordered:"",rounded:"",type:"number",modelValue:n.ingredient.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>n.ingredient.quantity=t)},null,8,["modelValue"])]),_:1}),a(i(c),{class:"w-full px-4",label:"Name"},{default:l(()=>[n.ingredient.product_id?(m(),p("div",L,h(n.ingredient.name),1)):(m(),$(v,{key:1,modelValue:n.ingredient.product_id,"onUpdate:modelValue":e[1]||(e[1]=t=>n.ingredient.product_id=t),label:n.ingredient.name,"onUpdate:label":[e[2]||(e[2]=t=>n.ingredient.name=t),e[3]||(e[3]=t=>s.$emit("check",t))],class:"w-full",tag:"","custom-label":"name","track-id":"id",placeholder:"Add ingredient",endpoint:"/api/ingredients"},null,8,["modelValue","label"]))]),_:1}),a(i(c),{class:"px-4",label:"Unit"},{default:l(()=>[a(y,{rounded:"",modelValue:n.ingredient.unit,"onUpdate:modelValue":e[4]||(e[4]=t=>n.ingredient.unit=t),class:"border border-none rounded-t-none rounded-b-none text-body bg-base border-base-deep-1"},null,8,["modelValue"])]),_:1}),a(i(c),{label:"Actions"},{default:l(()=>[a(i(k),{type:"danger",class:"items-center h-10",rounded:"",onClick:e[5]||(e[5]=t=>s.removeIngredient(n.index))},{default:l(()=>[M]),_:1})]),_:1})]))}},T={class:"text-body"},A={__name:"MealForm",props:{meal:{type:Object,default:()=>({name:""})}},emits:["close"],setup(n,{expose:s}){var r;const e=n,t=w({name:(r=e.meal)==null?void 0:r.name,ingredients:e.meal?[...e.meal.ingredients,{}]:[{}]}),b=async()=>{const d=e.meal?"put":"post",u=e.meal?`/meals/${e.meal.id}`:"/meals";t.transform(o=>({...o,ingredients:o.ingredients.filter(f=>f.name)})).submit(d,u,{onSuccess:async()=>{d=="post"&&(await U(),t.reset())}})},g=(d,u)=>{t.ingredients.length==d+1&&u&&t.ingredients.push({unit:"unit",quantity:1,product_id:"",name:""})};return s({submit:b}),(d,u)=>(m(),p("div",T,[a(i(c),{label:"Title"},{default:l(()=>[a(y,{modelValue:i(t).name,"onUpdate:modelValue":u[0]||(u[0]=o=>i(t).name=o),rounded:""},null,8,["modelValue"])]),_:1}),a(i(c),{label:"Ingredients"},{default:l(()=>[(m(!0),p(F,null,C(i(t).ingredients,(o,f)=>(m(),$(S,{key:`${o.id}-${f}`,meal:n.meal,index:f,ingredient:o,onCheck:V=>g(f,V)},null,8,["meal","index","ingredient","onCheck"]))),128))]),_:1})]))}},Z=N(" Save "),ee={__name:"Create",props:{meals:{type:[Object,null],default:null}},setup(n){const s=n,e=q(null),t=()=>{e.value.submit()},b=B(()=>s.meals?`Meals / ${s.meals.name}`:"Create recipe");return(g,r)=>(m(),$(_,{title:i(b),"show-back-button":!0,onBack:r[1]||(r[1]=d=>g.$inertia.visit("/meal-planner"))},{header:l(()=>[a(j,null,{actions:l(()=>[x("div",null,[a(i(k),{class:"h-10 text-white bg-primary",rounded:"",onClick:r[0]||(r[0]=d=>t())},{default:l(()=>[Z]),_:1})])]),_:1})]),default:l(()=>[a(O,{class:"mx-auto","show-meal-types":!1},{default:l(()=>[a(A,{ref_key:"mealForm",ref:e,meal:n.meals,class:"bg-base-lvl-3 rounded-md px-4 py-2"},null,8,["meal"])]),_:1})]),_:1},8,["title"]))}};export{ee as default};
