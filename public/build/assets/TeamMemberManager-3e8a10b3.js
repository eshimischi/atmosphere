import{J as U}from"./ActionMessage-7e1f1ed0.js";import{_ as J}from"./ActionSection-a4f8ba89.js";import{J as q}from"./Button-20161051.js";import{J as $}from"./ConfirmationModal-1386a268.js";import{J as A}from"./DangerButton-9a0e417b.js";import{J as G}from"./DialogModal-82d3af1c.js";import{J as H}from"./FormSection-4ff6daac.js";import{J as T}from"./SecondaryButton-49a7f87e.js";import{J as C}from"./SectionBorder-faae4787.js";import{_ as K}from"./LogerInput-2f23c230.js";import{B as F,Z as L}from"./atmosphere-ui-5b718e83.js";import{T as p,x as Q,o as n,e as r,a as l,w as o,g as u,u as t,c as j,b as a,F as h,h as k,n as f,t as b,i as d,O as W}from"./app-fc313f38.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./SectionCardTitle-ba46a1f9.js";import"./Modal-ca404241.js";/* empty css                                              */const X={key:0},Y=a("div",{class:"col-span-6"},[a("div",{class:"max-w-xl text-sm text-body-1"}," Please provide the email address of the person you would like to add to this team. ")],-1),ee={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},te=["onClick"],oe={class:"flex items-center"},se={key:0,class:"w-5 h-5 ml-2 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ne=a("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),ae=[ne],re={class:"mt-2 text-xs text-gray-600"},le={key:1},ie={class:"space-y-6"},me={class:"text-gray-600"},de={class:"flex items-center space-x-2"},ce=["onClick"],ue={key:2},ve={class:"space-y-6"},ge={class:"flex items-center"},fe=["src","alt"],be={class:"ml-4"},ye={class:"flex items-center"},pe=["onClick"],he={key:1,class:"ml-2 text-sm text-gray-400"},ke=["onClick"],Re={key:0},xe={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Me=["onClick"],_e={class:"flex items-center"},Te={key:0,class:"w-5 h-5 ml-2 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},Ce=a("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),we=[Ce],Be={class:"mt-2 text-xs text-gray-600"},Ue={__name:"TeamMemberManager",props:{team:Object,availableRoles:{type:Array,default(){return[]}},userPermissions:Object},setup(i){const R=i,c=p({email:"",role:null}),g=p({role:null}),x=p({}),M=p({}),y=Q({currentlyManagingRole:!1,managingRoleFor:null,confirmingLeavingTeam:!1,teamMemberBeingRemoved:null});function P(){c.post(route("team-members.store",R.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>c.reset()})}function z(s){p({}).put(route("team-invitations.resend",s),{preserveScroll:!0})}function V(s){W.delete(route("team-invitations.destroy",s),{preserveScroll:!0})}function O(s){y.managingRoleFor=s,g.role=s.membership.role,y.currentlyManagingRole=!0}function I(){g.put(route("team-members.update",[R.team,y.managingRoleFor]),{preserveScroll:!0,onSuccess:()=>this.currentlyManagingRole=!1})}function N(){y.confirmingLeavingTeam=!0}function D(){x.delete(route("team-members.destroy",[this.team,this.$page.props.user]))}function E(s){y.teamMemberBeingRemoved=s}function Z(){M.delete(route("team-members.destroy",[this.team,this.teamMemberBeingRemoved]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>this.teamMemberBeingRemoved=null})}function w(s){return R.availableRoles.find(m=>m.key===s).name}return(s,m)=>{var B,S;return n(),r("div",null,[(B=i.userPermissions)!=null&&B.canAddTeamMembers?(n(),r("div",X,[l(C),l(H,{title:"Add Team Member",description:"Add a new team member to your team, allowing them to collaborate with you.",onSubmitted:P},{form:o(()=>[Y,l(t(F),{class:"col-span-6 sm:col-span-4",label:"Email",field:"email",errors:t(c).errors},{default:o(()=>[l(K,{id:"email",type:"email",modelValue:t(c).email,"onUpdate:modelValue":m[0]||(m[0]=e=>t(c).email=e)},null,8,["modelValue"])]),_:1},8,["errors"]),i.availableRoles.length>0?(n(),j(t(F),{key:0,class:"col-span-6 lg:col-span-4",field:"roles",label:"Role",errors:t(c).errors},{default:o(()=>[a("div",ee,[(n(!0),r(h,null,k(i.availableRoles,(e,v)=>(n(),r("button",{type:"button",class:f(["relative inline-flex w-full px-4 py-3 rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":v>0,"rounded-b-none":v!=Object.keys(i.availableRoles).length-1}]),onClick:_=>t(c).role=e.key,key:e.key},[a("div",{class:f({"opacity-50":t(c).role&&t(c).role!=e.key})},[a("div",oe,[a("div",{class:f(["text-sm text-gray-600",{"font-semibold":t(c).role==e.key}])},b(e.name),3),t(c).role==e.key?(n(),r("svg",se,ae)):u("",!0)]),a("div",re,b(e.description),1)],2)],10,te))),128))])]),_:1},8,["errors"])):u("",!0)]),actions:o(()=>[l(U,{on:t(c).recentlySuccessful,class:"mr-3"},{default:o(()=>[d(" Added. ")]),_:1},8,["on"]),l(t(L),{type:"primary","is-loading":t(c).processing,disabled:t(c).processing},{default:o(()=>[d(" Add ")]),_:1},8,["is-loading","disabled"])]),_:1})])):u("",!0),i.team.team_invitations.length>0&&((S=i.userPermissions)!=null&&S.canAddTeamMembers)?(n(),r("div",le,[l(C),l(J,{class:"mt-10 sm:mt-0",title:" Pending Team Invitations",description:"These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation."},{content:o(()=>[a("div",ie,[(n(!0),r(h,null,k(i.team.team_invitations,e=>(n(),r("div",{class:"flex items-center justify-between",key:e.id},[a("div",me,b(e.email),1),a("div",de,[i.userPermissions.canRemoveTeamMembers?(n(),r("button",{key:0,class:"ml-6 text-sm text-red-500 cursor-pointer focus:outline-none",onClick:v=>V(e)}," Cancel ",8,ce)):u("",!0),i.userPermissions.canRemoveTeamMembers?(n(),j(t(L),{key:1,class:"text-white rounded-lg bg-primary",onClick:v=>z(e)},{default:o(()=>[d(" Send Invitation ")]),_:2},1032,["onClick"])):u("",!0)])]))),128))])]),_:1})])):u("",!0),i.team.users.length>0?(n(),r("div",ue,[l(C),l(J,{class:"mt-10 sm:mt-0"},{title:o(()=>[d(" Team Members ")]),description:o(()=>[d(" All of the people that are part of this team. ")]),content:o(()=>[a("div",ve,[(n(!0),r(h,null,k(i.team.users,e=>{var v;return n(),r("div",{class:"flex items-center justify-between",key:e.id},[a("div",ge,[a("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.name},null,8,fe),a("div",be,b(e.name),1)]),a("div",ye,[(v=i.userPermissions)!=null&&v.canAddTeamMembers&&i.availableRoles.length?(n(),r("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:_=>O(e)},b(w(e.membership.role)),9,pe)):i.availableRoles.length?(n(),r("div",he,b(w(e.membership.role)),1)):u("",!0),s.$page.props.user.id===e.id?(n(),r("button",{key:2,class:"ml-6 text-sm text-red-500 cursor-pointer",onClick:N}," Leave ")):u("",!0),i.userPermissions.canRemoveTeamMembers?(n(),r("button",{key:3,class:"ml-6 text-sm text-red-500 cursor-pointer",onClick:_=>E(e)}," Remove ",8,ke)):u("",!0)])])}),128))])]),_:1})])):u("",!0),l(G,{show:s.currentlyManagingRole,onClose:m[2]||(m[2]=e=>s.currentlyManagingRole=!1)},{title:o(()=>[d(" Manage Role ")]),content:o(()=>[s.managingRoleFor?(n(),r("div",Re,[a("div",xe,[(n(!0),r(h,null,k(i.availableRoles,(e,v)=>(n(),r("button",{type:"button",class:f(["relative inline-flex w-full px-4 py-3 rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":v>0,"rounded-b-none":v!==Object.keys(i.availableRoles).length-1}]),onClick:_=>t(g).role=e.key,key:e.key},[a("div",{class:f({"opacity-50":t(g).role&&t(g).role!==e.key})},[a("div",_e,[a("div",{class:f(["text-sm text-gray-600",{"font-semibold":t(g).role===e.key}])},b(e.name),3),t(g).role===e.key?(n(),r("svg",Te,we)):u("",!0)]),a("div",Be,b(e.description),1)],2)],10,Me))),128))])])):u("",!0)]),footer:o(()=>[l(T,{onClick:m[1]||(m[1]=e=>s.currentlyManagingRole=!1)},{default:o(()=>[d(" Cancel ")]),_:1}),l(q,{class:f(["ml-2",{"opacity-25":t(g).processing}]),onClick:I,disabled:t(g).processing},{default:o(()=>[d(" Save ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l($,{show:s.confirmingLeavingTeam,onClose:m[4]||(m[4]=e=>s.confirmingLeavingTeam=!1)},{title:o(()=>[d(" Leave Team ")]),content:o(()=>[d(" Are you sure you would like to leave this team? ")]),footer:o(()=>[l(T,{onClick:m[3]||(m[3]=e=>s.confirmingLeavingTeam=!1)},{default:o(()=>[d(" Cancel ")]),_:1}),l(A,{class:f(["ml-2",{"opacity-25":t(x).processing}]),onClick:D,disabled:t(x).processing},{default:o(()=>[d(" Leave ")]),_:1},8,["class","disabled"])]),_:1},8,["show"]),l($,{show:s.teamMemberBeingRemoved,onClose:m[6]||(m[6]=e=>s.teamMemberBeingRemoved=null)},{title:o(()=>[d(" Remove Team Member ")]),content:o(()=>[d(" Are you sure you would like to remove this person from the team? ")]),footer:o(()=>[l(T,{onClick:m[5]||(m[5]=e=>s.teamMemberBeingRemoved=null)},{default:o(()=>[d(" Cancel ")]),_:1}),l(A,{class:f(["ml-2",{"opacity-25":t(M).processing}]),onClick:Z,disabled:t(M).processing},{default:o(()=>[d(" Remove ")]),_:1},8,["class","disabled"])]),_:1},8,["show"])])}}};export{Ue as default};
