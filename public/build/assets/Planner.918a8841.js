import{c as j,_ as g,b as F,f as N}from"./atmosphere-ui.es.bb151f48.js";import{_ as P}from"./AppLayout.d67665c7.js";import{_ as T}from"./Modal.40de7d4e.js";import{W as q,r as V,c as k,p as W,o as r,k as C,w as h,b as n,g as D,f as _,t as f,d as u,u as a,h as G,A,j as E,v as L,a as m,F as O,e as S,H,l as R}from"./app.e738c84d.js";import{M as I}from"./Meal.471652b5.js";import{s as U,f as B}from"./index.2e08e1eb.js";import{_ as X}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.a95d9f5e.js";const Z={class:"px-10 pt-5 pb-4"},z={class:"text-lg font-bold text-pink-400"},J={class:"px-4 pb-4 bg-slate-600 sm:p-6 sm:pb-4"},K={class:"sm:flex sm:items-start"},Q={class:"w-full text-center sm:mt-0 sm:ml-4 sm:text-left"},Y={class:"w-full"},ee={class:"px-6 py-4 space-x-3 text-right bg-slate-600"},te=_(" Cancel "),se=_(" Save "),ae={props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0},meals:{type:Array,default(){return[]}},selected:{type:Array,default(){return[]}},date:{default:new Date},title:{type:String}},emits:["close"],setup(o,{emit:i}){const e=o,p=q({name:""}),d=V(e.selected),c=V(""),b=k(()=>e.meals.filter(l=>l.name.toLowerCase().includes(c.value.toLowerCase())));W(()=>e.selected,l=>{d.value=l},{immediate:!0});const v=()=>{i("close")},w=l=>{const t=d.value.findIndex(s=>s.id==l.id);t>=0?d.value.splice(t,1):d.value.push(l)},$=l=>l.filter(t=>t.id&&!t.schedule_id).map(t=>({id:t.id})),x=k(()=>$(d.value).length),M=()=>{!x.value||p.transform(()=>({date:U(e.date),meals:$(d.value)})).post(route("meals.addPlan"),{onSuccess:()=>{d.value=[],i("close")}})};return(l,t)=>(r(),C(T,{show:o.show,"max-width":o.maxWidth,closeable:o.closeable,onClose:v},{default:h(()=>[n("div",Z,[n("h3",z,[D(l.$slots,"title",{},()=>[_(f(o.title),1)])])]),n("div",J,[n("div",K,[n("div",Q,[D(l.$slots,"content",{},()=>[n("div",Y,[u(a(j),{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),placeholder:"Search meal by name",type:"search",class:"w-full h-10 overflow-hidden text-gray-200 border rounded-md bg-slate-900 border-slate-700"},null,8,["modelValue"]),u(I,{class:"overflow-auto h-96",meals:a(b),selected:d.value,onClick:w},null,8,["meals","selected"])])])])])]),n("div",ee,[u(a(g),{type:"secondary",rounded:"",onClick:v,class:"h-10"},{default:h(()=>[te]),_:1}),u(a(g),{class:"h-10 text-white bg-pink-400",rounded:"",onClick:M,disabled:!a(x)},{default:h(()=>[se]),_:1},8,["disabled"])])]),_:3},8,["show","max-width","closeable"]))}},le={emits:["close"],components:{Modal:T,AtField:F,AtInput:j,AtButton:g,Meal:I},props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0},meals:{type:Array,default(){return[]}},date:{default:new Date},title:{type:String}},setup(o,{emit:i}){const e=G({meal:null}),{show:p}=A(o),d=()=>{i("close")};W(p,()=>{p.value&&c()},{immediate:!0});const c=()=>{e.meal=null,E.get("/meals-random").then(({data:b})=>{e.meal=b})};return{...A(e),submit:c,close:d}}},oe={class:"px-4 py-5 text-center text-white bg-pink-500 sm:p-6 sm:pb-4"},ne={class:"justify-center sm:flex sm:items-start"},de={class:"mt-3 text-center sm:mt-0 sm:ml-4"},ie={class:"w-full text-4xl font-bold text-white"},re=_(" The meal is: "),ce={class:"mt-5 mb-5"},me={key:0,class:"mt-5 text-2xl"},ue={key:1,class:"mt-5 text-2xl"},pe={class:"mt-5"},fe=_(" Random ");function he(o,i,e,p,d,c){const b=L("at-button"),v=L("modal");return r(),C(v,{show:e.show,"max-width":e.maxWidth,closeable:e.closeable,onClose:p.close},{default:h(()=>[n("div",oe,[n("div",ne,[n("div",de,[n("h3",ie,[D(o.$slots,"title",{},()=>[re])]),n("div",ce,[D(o.$slots,"content",{},()=>[o.meal?(r(),m("div",me,f(o.meal.name),1)):(r(),m("div",ue," loading ... "))]),n("div",pe,[u(b,{class:"text-gray-700 bg-slate-600",disabled:!o.meal,onClick:i[0]||(i[0]=w=>p.submit())},{default:h(()=>[fe]),_:1},8,["disabled"])])])])])])]),_:3},8,["show","max-width","closeable","onClose"])}var _e=X(le,[["render",he]]);const be={class:"pl-6 pb-20 max-w-screen-2xl space-x-2 lg:pl-8"},ve={class:"flex justify-between w-full mb-4"},xe={class:"space-x-2 flex justify-end items-center ml-auto"},ye=_(" Random Meal "),ge={key:0,class:"py-5 overflow-hidden border rounded-md bg-slate-600"},we={class:"px-5 text-pink-500 cursor-pointer bg-slate-600"},$e={key:1,class:"pt-5 overflow-hidden text-gray-200 border divide-y-2 rounded-md divide-slate-800 border-slate-800 bg-slate-600"},Me=["onClick"],ke={class:""},Be={props:{mealPlans:{type:Object,required:!0},meals:{type:Array,required:!0},ingredients:{type:Object,default(){return{}}},mode:{type:String,default:""}},setup(o){var x,M;const i=o,e=G({isModalOpen:!1,isRandomModalOpen:!1,searchOptions:{group:"",date:{startDate:null,endDate:null}},date:U(((M=(x=i.serverSearchOptions)==null?void 0:x.date)==null?void 0:M.startDate)||new Date),dateSpan:null,mode:"week",selectedMealsOfDay:[],isGroceryList:k(()=>i.mode=="grocery-list"),toggleBtnText:k(()=>e.isGroceryList?"Meal planner":"Grocery List")}),p=()=>{e.isRandomModalOpen=!0},d=l=>B(l,"iiii"),c=l=>{const t=B(l,"yyyy-MM-dd");return i.mealPlans.data.filter(s=>s.date==t)},b=()=>{H(()=>{R.Inertia.reload()})},v=l=>l?e.isGroceryList?"":"mode=grocery-list":i.mode?`mode=${i.mode}`:"",w=()=>{R.Inertia.visit(`/meal-planner?${v(!0)}`)},$=l=>{e.selectedMealsOfDay=c(l).map(t=>({...t.dateable,schedule_id:t.id})),e.isModalOpen=l};return(l,t)=>(r(),C(P,{title:"Meal Planner"},{default:h(()=>[n("div",be,[n("div",ve,[n("div",xe,[u(a(N),{class:"h-12 w-full border-none bg-slate-600 text-gray-200 ml-auto",modelValue:a(e).date,"onUpdate:modelValue":t[0]||(t[0]=s=>a(e).date=s),dateSpan:a(e).dateSpan,"onUpdate:dateSpan":t[1]||(t[1]=s=>a(e).dateSpan=s),startDate:a(e).searchOptions.date.startDate,"onUpdate:startDate":t[2]||(t[2]=s=>a(e).searchOptions.date.startDate=s),endDate:a(e).searchOptions.date.endDate,"onUpdate:endDate":t[3]||(t[3]=s=>a(e).searchOptions.date.endDate=s),controlsClass:"bg-transparent text-gray-200 hover:bg-slate-600"},null,8,["modelValue","dateSpan","startDate","endDate"]),u(a(g),{class:"h-10 w-64 text-white bg-pink-400",onClick:t[4]||(t[4]=s=>p()),rounded:""},{default:h(()=>[ye]),_:1}),u(a(g),{class:"h-10 w-52 text-white bg-pink-400",onClick:t[5]||(t[5]=s=>w()),rounded:""},{default:h(()=>[_(f(a(e).toggleBtnText),1)]),_:1})])]),a(e).isGroceryList?(r(),m("div",ge,[(r(!0),m(O,null,S(o.ingredients,(s,y)=>(r(),m("div",we,f(y)+" ("+f(s.quantity)+") "+f(s.unit),1))),256))])):(r(),m("div",$e,[(r(!0),m(O,null,S(a(e).dateSpan,s=>(r(),m("div",{key:s,onClick:y=>$(s),class:"px-5 py-4 cursor-pointer bg-slate-600"},[_(f(d(s))+" ",1),n("div",ke,[(r(!0),m(O,null,S(c(s),y=>(r(),m("div",{key:y.id,class:"font-bold text-pink-400"},f(y.dateable.name),1))),128))])],8,Me))),128))])),u(ae,{show:a(e).isModalOpen,closeable:!0,date:a(e).isModalOpen,selected:a(e).selectedMealsOfDay,title:`Add a new meal to ${l.isModalOpen&&d(l.isModalOpen)}`,meals:o.meals,onClose:t[6]||(t[6]=s=>a(e).isModalOpen=!1),onSaved:b},null,8,["show","date","selected","title","meals"]),u(_e,{show:a(e).isRandomModalOpen,closeable:!0,onClose:t[7]||(t[7]=s=>a(e).isRandomModalOpen=!1)},null,8,["show"])])]),_:1}))}};export{Be as default};
