import{i as z,g as F,Z as G,E as N}from"./atmosphere-ui.df5681b0.js";import{s as S,A as R,x as U,ac as E,l as C,o as s,g,b as u,d as m,k as V,c as l,t as v,a as c,i as h,e as H,n as W,a5 as Z,q as D,u as J,f as I,F as w,h as M,a6 as $}from"./app.cf37a944.js";import{h as K,b as Q,_ as X,a as O}from"./AppLayout.d865f89d.js";import{_ as Y}from"./Modal.0d748749.js";import{_ as ee}from"./MealSection.195fd91f.js";import{_ as B}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as te,a as se}from"./MealTemplate.9cf56a60.js";import{I as ae}from"./IconClose.0918341c.js";import{s as L}from"./index.0a3d776d.js";import{a6 as T}from"./naiveui.c9ccbfb7.js";import"./LogerInput.572fb66a.js";/* empty css                                              */import"./SectionNav.5be3a928.js";import"./SectionTitle.d24cbe5a.js";const oe={emits:["close"],components:{Modal:Y,AtField:z,AtInput:F,AtButton:G,Meal:ee},props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0},meals:{type:Array,default(){return[]}},date:{default:new Date},title:{type:String}},setup(a,{emit:n}){const r=S({meal:null}),{show:e}=R(a),b=()=>{n("close")};U(e,()=>{e.value&&p()},{immediate:!0});const p=()=>{r.meal=null,E.get("/meals-random").then(({data:_})=>{r.meal=_})};return{...R(r),submit:p,close:b}}},le={class:"px-4 py-5 text-center text-white bg-primary sm:p-6 sm:pb-4"},ne={class:"justify-center sm:flex sm:items-start"},re={class:"mt-3 text-center sm:mt-0 sm:ml-4"},de={class:"w-full text-4xl font-bold text-white"},ie=h(" The meal is: "),me={class:"mt-5 mb-5"},ce={key:0,class:"mt-5 text-2xl"},ue={key:1,class:"mt-5 text-2xl"},pe={class:"mt-5"},_e=h(" Random ");function fe(a,n,r,e,b,p){const _=C("at-button"),i=C("modal");return s(),g(i,{show:r.show,"max-width":r.maxWidth,closeable:r.closeable,onClose:e.close},{default:u(()=>[m("div",le,[m("div",ne,[m("div",re,[m("h3",de,[V(a.$slots,"title",{},()=>[ie])]),m("div",me,[V(a.$slots,"content",{},()=>[a.meal?(s(),l("div",ce,v(a.meal.name),1)):(s(),l("div",ue," loading ... "))]),m("div",pe,[c(_,{class:"text-gray-700 bg-base-lvl-1",disabled:!a.meal,onClick:n[0]||(n[0]=x=>e.submit())},{default:u(()=>[_e]),_:1},8,["disabled"])])])])])])]),_:3},8,["show","max-width","closeable","onClose"])}const be=B(oe,[["render",fe]]),ye={name:"RiHeartFill"},ve={width:"1em",height:"1em",viewBox:"0 0 24 24"},he=m("path",{fill:"currentColor",d:"M12.001 4.529a5.998 5.998 0 0 1 8.242.228a6 6 0 0 1 .236 8.236l-8.48 8.492l-8.478-8.492a6 6 0 0 1 8.48-8.464z"},null,-1),xe=[he];function $e(a,n,r,e,b,p){return s(),l("svg",ve,xe)}const ge=B(ye,[["render",$e]]),ke={name:"RiHeartLine"},we={width:"1em",height:"1em",viewBox:"0 0 24 24"},Me=m("path",{fill:"currentColor",d:"M12.001 4.529a5.998 5.998 0 0 1 8.242.228a6 6 0 0 1 .236 8.236l-8.48 8.492l-8.478-8.492a6 6 0 0 1 8.48-8.464zm6.826 1.641a3.998 3.998 0 0 0-5.49-.153l-1.335 1.198l-1.336-1.197a3.999 3.999 0 0 0-5.494.154a4 4 0 0 0-.192 5.451L12 18.654l7.02-7.03a4 4 0 0 0-.193-5.454z"},null,-1),Ce=[Me];function Se(a,n,r,e,b,p){return s(),l("svg",we,Ce)}const Be=B(ke,[["render",Se]]);const Re={key:0,class:"px-2 py-2 group bg-base-lvl-2 font-bold justify-between text-primary w-full flex"},Ve={class:"capitalize"},De={class:"transition flex space-x-2 items-center text-xl"},Ie={key:1,class:"flex w-full overflow-visible"},Oe=h("Save"),Le={__name:"MealTypeCell",props:{plannedMeal:{type:[Object,null]},mealType:{type:Object,required:!0}},emits:["submit"],setup(a,{emit:n}){const r=a,e=S({id:null,name:""}),b=(_,i)=>{n("submit",{...e,meal_type_id:r.mealType.id})},p=_=>{n(_,r.plannedMeal)};return(_,i)=>{const x=C("AtButton");return s(),l("div",{class:W(["meal-cell border border-dashed border-primary rounded-md px-5 py-2 w-ful flex overflow-visible mb-4",[a.plannedMeal?"bg-base-lvl-2":"bg-base-lvl-3"]])},[a.plannedMeal?(s(),l("div",Re,[m("span",Ve,v(a.plannedMeal.dateable.name),1),m("div",De,[c(x,{class:"hidden transition my-0 text-body-1/80 hover:text-error/80 group-hover:inline-block",onClick:i[0]||(i[0]=y=>p("removed"))},{default:u(()=>[c(ae)]),_:1}),c(x,{class:"group-hover:text-red-500",onClick:i[1]||(i[1]=y=>p("toggle-like"))},{default:u(()=>[a.plannedMeal.is_liked?(s(),g(ge,{key:0})):(s(),g(Be,{key:1}))]),_:1})])])):(s(),l("div",Ie,[c(K,{modelValue:e.id,"onUpdate:modelValue":i[2]||(i[2]=y=>e.id=y),label:e.name,"onUpdate:label":i[3]||(i[3]=y=>e.name=y),class:"w-full",tag:"","custom-label":"name","track-id":"id",bordered:!1,placeholder:`Add ${a.mealType.name}`,endpoint:"/api/recipes"},null,8,["modelValue","label","placeholder"]),e.id?(s(),g(Q,{key:0,onClick:b},{default:u(()=>[Oe]),_:1})):H("",!0)]))],2)}}},Te={class:"flex items-center justify-end ml-auto space-x-2"},Ae=h(" Random Meal "),je={class:"pb-20 space-x-2"},Pe={key:0,class:"py-5 overflow-hidden border rounded-md bg-base-lvl-3"},qe={key:1,class:"pt-5 overflow-hidden border divide-y-2 rounded-md text-body divide-base border-base bg-base-lvl-3"},ze=["onClick"],Fe={class:"flex items-center mt-2 space-x-2"},st={__name:"Planner",props:{mealPlans:{type:Object,required:!0},meals:{type:Array,required:!0},ingredients:{type:Object,default(){return{}}},mode:{type:String,default:""}},setup(a){const n=a,r=Z().props,e=S({selectedDay:!1,isRandomModalOpen:!1,date:L(new Date),dateSpan:null,mode:"week",selectedMealsOfDay:[],isGroceryList:D(()=>n.mode=="grocery-list"),toggleBtnText:D(()=>e.isGroceryList?"Meal planner":"Grocery List")}),b=()=>{e.isRandomModalOpen=!0},p=t=>T(t,"iiii"),_=(t,d)=>{const o=T(t,"yyyy-MM-dd");return n.mealPlans.find(f=>f.date==o&&f.dateable.meal_type_id==d)},i=t=>t?e.isGroceryList?"":"mode=grocery-list":n.mode?`mode=${n.mode}`:"",x=()=>{$.Inertia.visit(`/meal-planner?${i(!0)}`)},y=t=>{e.selectedDay=t},k=J({date:null,meals:[]}),A=t=>{!t.id&&!t.name||k.transform(()=>({date:L(e.selectedDay),meals:[t]})).post(route("meals.addPlan"),{onSuccess:()=>{k.id="",k.name="",k.reset()}})},j=t=>{t.is_liked=!Boolean(t.is_liked),$.Inertia.put(route("meal-planner.update",t),t,{onSuccess(){$.Inertia.reload({preserveScroll:!0})}})},P=t=>{t.is_liked=!Boolean(t.is_liked),$.Inertia.delete(route("meal-planner.destroy",t),t,{onSuccess(){$.Inertia.reload({preserveScroll:!0})}})};return(t,d)=>(s(),g(X,{title:"Meal Planner"},{header:u(()=>[c(te,null,{actions:u(()=>[m("div",Te,[c(I(N),{class:"w-full h-12 ml-auto border-none bg-base-lvl-1 text-body",modelValue:e.date,"onUpdate:modelValue":d[0]||(d[0]=o=>e.date=o),dateSpan:e.dateSpan,"onUpdate:dateSpan":d[1]||(d[1]=o=>e.dateSpan=o),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"week"},null,8,["modelValue","dateSpan"]),c(O,{variant:"inverse",class:"w-64 h-10",onClick:d[2]||(d[2]=o=>b())},{default:u(()=>[Ae]),_:1}),c(O,{class:"h-10 w-52",variant:"secondary",onClick:d[3]||(d[3]=o=>x())},{default:u(()=>[h(v(e.toggleBtnText),1)]),_:1})])]),_:1})]),default:u(()=>[c(se,{class:"mx-auto"},{default:u(()=>[m("div",je,[e.isGroceryList?(s(),l("div",Pe,[(s(!0),l(w,null,M(a.ingredients,(o,f)=>(s(),l("div",{key:o.id,class:"px-5 cursor-pointer text-primary"},v(f)+" ("+v(o.quantity)+") "+v(o.unit),1))),128))])):(s(),l("div",qe,[(s(!0),l(w,null,M(e.dateSpan,o=>(s(),l("div",{key:o,onClick:f=>y(o),class:"px-5 py-4 cursor-pointer bg-base-lvl-3"},[h(v(p(o))+" ",1),m("div",Fe,[(s(!0),l(w,null,M(I(r).mealTypes,f=>(s(),l("div",{class:"w-full",key:`${f.id}-${o}`},[c(Le,{modelValue:t.recipe,"onUpdate:modelValue":d[4]||(d[4]=q=>t.recipe=q),"planned-meal":_(o,f.id),"meal-type":f,onSubmit:A,onToggleLike:j,onRemoved:P},null,8,["modelValue","planned-meal","meal-type"])]))),128))])],8,ze))),128))])),c(be,{show:e.isRandomModalOpen,closeable:!0,onClose:d[5]||(d[5]=o=>e.isRandomModalOpen=!1)},null,8,["show"])])]),_:1})]),_:1}))}};export{st as default};
