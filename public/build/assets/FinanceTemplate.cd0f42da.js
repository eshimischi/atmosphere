import{o as p,a as m,b as a,t as g,d as i,f as y,u as d,z as C,C as S,U as M,F,e as T,k as I,l as V,r as w,W as z,c as $,K as B,i as H,w as v,h as O,s as b,g as A}from"./app.e738c84d.js";import{_ as D,a as E}from"./NumberHider.2bb87ca5.js";import{f as R}from"./formatMoney.228f3112.js";import{_ as N}from"./SectionTitle.75e670bb.js";import{u as P}from"./useSelects.b4e4d8e6.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import{I as j}from"./AppLayout.d67665c7.js";import{_ as W}from"./Modal.40de7d4e.js";import{_ as k}from"./atmosphere-ui.es.bb151f48.js";const q=["title"],K={class:"flex flex-wrap overflow-ellipsis overflow-hidden"},L={class:"relative text-sm"},Y={props:{account:{type:Object,required:!0},isSelected:{type:Boolean,default:!1}},setup(t){return(n,r)=>(p(),m("div",C({class:["hover:bg-slate-600 cursor-pointer py-2 px-2 rounded-md overflow-hidden",{"bg-slate-500":t.isSelected}]},n.$attrs,S(n.$attrs),{title:t.account.balance}),[a("strong",K,g(t.account.name),1),a("p",L,[i(D),y(" "+g(d(R)(t.account.balance)),1)])],16,q))}},Z={class:"rounded-md border-l border-slate-600 px-5 text-slate-200"},G={class:"space-y-2"},J={props:{accounts:{type:Array,default:()=>[]}},setup(t){const n=M().props,r=l=>n.value.accountId==l;return(l,s)=>(p(),m("div",Z,[a("div",G,[(p(!0),m(F,null,T(t.accounts,o=>(p(),I(Y,{key:o.id,account:o,"is-selected":r(o.id),onClick:e=>d(V.Inertia).visit(`/finance/${o.id}/transactions`)},null,8,["account","is-selected","onClick"]))),128))])]))}},Q={name:"IcRoundMoveToInbox"},X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1em",height:"1em",viewBox:"0 0 24 24"},ee=a("path",{fill:"currentColor",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 11h-3.56c-.36 0-.68.19-.86.5c-.52.9-1.47 1.5-2.58 1.5s-2.06-.6-2.58-1.5a1 1 0 0 0-.86-.5H5V5h14v9zm-4.21-4H13V7c0-.55-.45-1-1-1s-1 .45-1 1v3H9.21c-.45 0-.67.54-.35.85l2.79 2.79c.2.2.51.2.71 0l2.79-2.79a.5.5 0 0 0-.36-.85z"},null,-1),te=[ee];function se(t,n,r,l,s,o){return p(),m("svg",X,te)}var oe=U(Q,[["render",se]]);const ae={class:"w-full h-full absolute z-20 px-5 py-2 bg-transparent flex items-center justify-center"},ne={for:"fileInput",class:"cursor-pointer text-slate-300 font-bold text-sm"},re={key:0,class:"text-red-300"},le={props:{placeholder:{type:String,default:"Drag a CSV file here or upload via the button to import your transactions"},endpoint:{type:String,default:"/financial/import"}},emits:["uploaded","error","canceled"],setup(t,{expose:n,emit:r}){const l=t,s=w(),o=()=>{var u;(u=s.value)==null||u.click()},e=z({file:null}),_=$(()=>e.file?e.file.name:l.placeholder),x=u=>{e.file=u.target.files.length?u.target.files[0]:null},f=()=>{s.value.value=null,e.file=null},c=async()=>{if(!e.file){e.setError("file","You have to submit a file");return}e.post(l.endpoint,{onSuccess(){r("uploaded"),f()}})},h=$(()=>{var u;return{width:`${((u=e.progress)==null?void 0:u.percentage)||0}%`||"0px"}});return n({processImport:c}),(u,ve)=>(p(),m("div",{class:"h-32 w-full relative rounded-md flex items-end justify-center border-dashed border border-pink-500 cursor-pointer hover:bg-slate-500 transition",role:"button",onClick:o,relative:""},[a("div",ae,[a("input",{name:"fileInput",type:"file",ref_key:"fileInputRef",ref:s,class:"hidden",onChange:x},null,544),a("label",ne,g(d(_)),1)]),a("div",{class:"absolute h-full flex z-10 bg-pink-500/30 w-full",style:B(d(h))},null,4),d(e).hasErrors?(p(),m("small",re,g(d(e).errors.file),1)):H("",!0)]))}},ce={class:"pb-4 bg-slate-600 sm:p-6 sm:pb-4 text-gray-200"},ie={class:"px-6 py-4 space-x-3 text-right bg-slate-700"},ue=y(" Cancel "),de=y(" Import "),pe={props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0}},emits:["update:show"],setup(t,{emit:n}){const r=w(),l=()=>{r.value.processImport()},s=()=>{n("update:show",!1)};return(o,e)=>(p(),I(W,{show:t.show,"max-width":t.maxWidth,closeable:t.closeable,onClose:s},{default:v(({close:_})=>[a("div",ce,[i(le,{ref_key:"importHolderRef",ref:r,onUploaded:s,endpoint:"/finance/import-budget"},null,512)]),a("div",ie,[i(d(k),{type:"secondary",onClick:_,rounded:"",class:"h-10"},{default:v(()=>[ue]),_:2},1032,["onClick"]),i(d(k),{class:"text-white bg-pink-400 h-10",onClick:l,rounded:""},{default:v(()=>[de]),_:1})])]),_:1},8,["show","max-width","closeable"]))}},fe={class:"pl-6 pb-20 max-w-screen-2xl space-x-2 flex lg:pl-8"},me={class:"w-10/12 pr-5"},_e={class:"w-2/12"},he=a("span",null," Budget Accounts ",-1),Se={props:{title:{type:String},categories:{type:Array,default(){return[]}},accounts:{type:Array,default(){return[]}}},setup(t,{expose:n}){const r=t,{categoryOptions:l}=P();l(r.categories,"accounts","categoryOptions"),l(r.accounts,"accounts","accountsOptions");const s=w(!1),o=w(!1),e=O({recurrence:!1,automatic:!1,transactionData:null}),_=(f,c)=>{o.value=!0,e.recurrence=f,e.automatic=c},x=f=>{e.transactionData=f,o.value=!0};return b("openTransactionModal",_),b("openTransactionModalForEdit",x),n({openTransactionModal:_,openTransactionModalForEdit:x}),(f,c)=>(p(),m("div",fe,[a("div",me,[A(f.$slots,"default")]),a("div",_e,[i(N,{class:"mt-5 pl-5 items-center flex",type:"secondary"},{default:v(()=>[he,i(j,{class:"text-pink-500 flex items-center ml-2",onClick:c[0]||(c[0]=h=>s.value=!s.value),title:"import"},{default:v(()=>[i(oe)]),_:1})]),_:1}),i(J,{accounts:t.accounts,class:"mt-5"},null,8,["accounts"])]),i(E,C(d(e),{show:o.value,"onUpdate:show":c[1]||(c[1]=h=>o.value=h)}),null,16,["show"]),i(pe,{show:s.value,"onUpdate:show":c[2]||(c[2]=h=>s.value=h)},null,8,["show"])]))}};export{Se as _};
