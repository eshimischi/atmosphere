import{f as C}from"./atmosphere-ui.es.343f9b42.js";import{o as r,a as o,b as i,F as D,e as g,y as u,t as m,g as h,i as w,K as $,u as d,h as k,p as T,r as A,d as x,w as B,z as E}from"./app.c4e32cc5.js";import{f as v}from"./formatMoney.228f3112.js";import{u as V,g as O}from"./index.26bcc7d9.js";import{a as L}from"./NumberHider.fca52128.js";import{s as b}from"./index.2e08e1eb.js";const P=[{label:"Date",name:"date",width:200},{label:"Payee",name:"payee",width:200,render(t){var p;return(p=t.payee)==null?void 0:p.name}},{label:"Category",name:"transactionCategory",render(t){var p;return(p=t.transactionCategory)==null?void 0:p.name}},{label:"Description",name:"description",width:300},{label:"Amount",name:"total",render(t){return v(t.total)}},{label:"",name:"actions",width:300,type:"custom"}],U=["data"],j={class:"px-2 py-4 font-bold text-left text-slate-200 border-b border-gray-200"},H={key:0},M={key:0},N=["colspan"],W=["innerHTML"],z={key:3},F={key:1},I={key:0},R=["colspan"],q=["colspan"],K={class:"py-5 text-center text-slate-200 w-full"},G=["colspan"],J={props:{cols:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},tableData:{type:Array},config:{type:Object,default(){return{}}},showPrepend:{type:Boolean,default:!1},showAppend:{type:Boolean,default:!1},emptyText:{type:String,default:"No data found"},hideEmptyText:{type:Boolean,default:!1}},setup(t){const p=({row:e})=>e.headerClass;return(e,c)=>(r(),o("table",{class:"table-fixed",style:{width:"100%"},data:t.tableData,"header-cell-class-name":p,onSortChange:c[0]||(c[0]=n=>e.$emit("sort",n)),onRowClick:c[1]||(c[1]=n=>e.$emit("row-click",n))},[i("thead",null,[i("tr",j,[(r(!0),o(D,null,g(t.cols,n=>(r(),o("th",{key:n.name,class:u(["px-2 py-4",[n.headerClass]])},m(n.label),3))),128))])]),t.tableData.length?(r(),o("tbody",H,[t.showPrepend?(r(),o("tr",M,[i("td",{colspan:t.cols.length},[h(e.$slots,"prepend")],8,N)])):w("",!0),(r(!0),o(D,null,g(t.tableData,(n,f)=>(r(),o("tr",{key:`data-row-${f}`,class:u(["text-slate-200",{"bg-slate-700/50":f%2}])},[(r(!0),o(D,null,g(t.cols,a=>(r(),o("td",{key:a.name,class:"h-full align-baseline",style:$({width:a.width,maxWidth:a.maxWidth})},[i("div",{class:u(["flex flex-col w-full h-full px-2 py-1 text-left",a.class])},[h(e.$slots,a.name,{scope:{row:n,value:n[a.name],col:a,field:a.name,$index:f}},()=>[a.type=="calc"?(r(),o("div",{key:0,class:u(a.class)},m(a.formula(n)),3)):a.type=="money"?(r(),o("div",{key:1,class:u(a.class)},m(d(v)(n[a.name])),3)):a.render?(r(),o("span",{key:2,innerHTML:a.render(n),class:u(a.class)},null,10,W)):(r(),o("div",z,m(n[a.name]),1))])],2)],4))),128))],2))),128))])):(r(),o("tbody",F,[t.showAppend?(r(),o("tr",I,[i("td",{colspan:t.cols.length},[h(e.$slots,"append")],8,R)])):w("",!0),i("tr",null,[i("td",{colspan:t.cols.length,class:"flex flex-col w-full"},[t.hideEmptyText?w("",!0):h(e.$slots,"empty",{key:0},()=>[i("div",K,m(t.emptyText),1)])],8,q)])])),i("tfoot",null,[i("tr",null,[i("td",{colspan:t.cols.length},[h(e.$slots,"append")],8,G)])])],40,U))}},Q={class:"pb-20 mt-5"},X={class:"flex items-center ml-auto w-72 space-x-2"},se={props:{transactions:{type:Array,default:()=>[]},serverSearchOptions:{type:Object,default:()=>({})},title:{type:String,default:"s"}},setup(t){var a,S;const p=t,e=k({filterOptions:[{label:"Accounts",value:"accounts"},{label:"Descriptions",value:"description"}],searchOptions:{group:"",date:{startDate:null,endDate:null}},date:b(((S=(a=p.serverSearchOptions)==null?void 0:a.date)==null?void 0:S.startDate)||new Date),dateSpan:null,listType:"table"});T(()=>e.searchOptions,()=>{V(e.searchOptions,e.dateSpan)},{deep:!0}),Object.entries(p.serverSearchOptions).forEach(([y,s])=>{y==="date"?(e.searchOptions.date.startDate=b(O(s.startDate)),e.searchOptions.date.endDate=b(O(s.endDate)),e.date=b(O(s.startDate))):e.searchOptions[y]=Object.values(e.filterOptions).map(l=>l.value).includes(s)?s:""});const c=A(!1),n=k({recurrence:!1,automatic:!1,transactionData:null}),f=y=>{n.transactionData=y,c.value=!0};return(y,s)=>(r(),o("div",Q,[i("div",X,[x(d(C),{class:"h-12 w-full bg-slate-600 text-gray-200 border-none",modelValue:d(e).date,"onUpdate:modelValue":s[0]||(s[0]=l=>d(e).date=l),dateSpan:d(e).dateSpan,"onUpdate:dateSpan":s[1]||(s[1]=l=>d(e).dateSpan=l),startDate:d(e).searchOptions.date.startDate,"onUpdate:startDate":s[2]||(s[2]=l=>d(e).searchOptions.date.startDate=l),endDate:d(e).searchOptions.date.endDate,"onUpdate:endDate":s[3]||(s[3]=l=>d(e).searchOptions.date.endDate=l),controlsClass:"bg-transparent text-gray-200 hover:bg-slate-600","next-mode":"month"},null,8,["modelValue","dateSpan","startDate","endDate"])]),x(J,{cols:d(P),"show-prepend":!0,"table-data":t.transactions,onEdit:f},{total:B(({scope:{row:l}})=>[i("div",{class:u(["font-bold",{"text-red-400":l.direction=="WITHDRAW","text-green-500":l.direction=="DEPOSIT"}])},m(d(v)(l.total)),3)]),_:1},8,["cols","table-data"]),x(L,E({onClose:s[4]||(s[4]=l=>c.value=!1)},d(n),{show:c.value,"onUpdate:show":s[5]||(s[5]=l=>c.value=l)}),null,16,["show"])]))}};export{se as _};
