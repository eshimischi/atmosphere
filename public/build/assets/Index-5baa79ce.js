import{o as b,f as C,b as t,a,i as y,t as c,n as D,r as M,q as p,c as k,w as r,B as E,u as s,O as w}from"./app-114b751b.js";import{L as V,Z as j}from"./atmosphere-ui-b819c890.js";import{_ as F,u as G,g as $}from"./AppLayout.vue_vue_type_script_setup_true_lang-c7e24bdb.js";import{_ as B}from"./NumberHider-49c0aef0.js";import{g as I,u as R,f as L}from"./isMobile-e3872359.js";import{_ as S,p as q,t as z}from"./TransactionsTable-abfea9c2.js";import{u as H,_ as P,F as U}from"./useServerSearch-55d027ef.js";import{_ as Z}from"./BudgetProgress-06c39c7c.js";import{f as g}from"./formatMoney-75af80f0.js";import{_ as W,a as h}from"./WidgetTitleCard-6fb0316f.js";import{_ as Y}from"./LogerButton-7d66d0a8.js";import{s as J}from"./index-560697aa.js";import"./useFirebase-fe12e715.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AppIcon-f342d706.js";/* empty css                                                */import"./Modal-c2871cdd.js";/* empty css                                              */import"./LogerInput-8ca4e824.js";import"./exact-math.node-ab123f44.js";import"./index-2052210e.js";import"./Progress-446b78be.js";import"./Dropdown-839d2ecf.js";import"./SectionTitle-20b8f2ca.js";import"./vue-draggable-next.esm-bundler-3a2dc928.js";import"./constants-cb26b0c1.js";import"./WidgetCard-f1e3a88f.js";import"./SectionNav-dd96bdd5.js";import"./auto-4dc61a7a.js";import"./chart-eb93a947.js";import"./index-e07a0d7b.js";const K={class:"relative text-sm font-bold text-blue-400"},Q={class:"w-full ml-5 text-right"},X={class:"font-bold"},tt={class:"w-full overflow-hidden text-sm text-right block overflow-ellipsis min-w-full"},et="flex bg-gray-100 items-center rounded-md px-5 py-4",T={__name:"FinanceCard",props:{value:{type:String},title:{type:String},subtitle:{type:String},hidden:{type:Boolean}},setup(e){return(n,o)=>(b(),C("div",{class:D(et)},[t("div",K,[a(B),y(" "+c(e.value),1)]),t("div",Q,[t("p",X,c(e.title),1),t("span",tt,c(e.subtitle),1)])]))}},at={class:"flex justify-between"},st=t("span",null,[t("i",{class:"fa fa-cogs"})],-1),nt={class:"mt-2 text-lg font-bold relative"},rt={class:"font-bold"},ot={__name:"FinanceVarianceCard",props:{value:{type:String},title:{type:String},varianceTitle:{type:String},variance:{type:String},varianceAmount:{type:[String,Number]}},setup(e){const n=e,o=M(),l=I(o),f=p(()=>l.value?n.varianceAmount:`${n.variance}%`);return(m,u)=>(b(),C("div",{class:"px-5 py-5 mx-auto text-white bg-primary cursor-pointer rounded-xl",onClick:u[0]||(u[0]=v=>m.$emit("click"))},[t("header",at,[t("h4",null,c(e.title),1),st]),t("div",nt,[a(B),y(" "+c(e.value),1)]),t("div",{class:"px-5 py-2 mt-4 text-xs bg-gray-700 bg-opacity-25 rounded-3xl",ref_key:"varianceRef",ref:o},[y(c(e.varianceTitle)+": ",1),t("span",rt,c(f.value),1)],512)]))}},lt={class:"w-full"},it={class:"flex items-center justify-between"},ct={class:"font-bold text-body-1/80"},ut=t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"iconify iconify--ic",width:"32",height:"32",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[t("path",{fill:"currentColor",d:"M12 7C6.48 7 2 9.24 2 12c0 2.24 2.94 4.13 7 4.77V20l4-4l-4-4v2.73c-3.15-.56-5-1.9-5-2.73c0-1.06 3.04-3 8-3s8 1.94 8 3c0 .73-1.46 1.89-4 2.53v2.05c3.53-.77 6-2.53 6-4.58c0-2.76-4.48-5-10-5z"})],-1),dt=[ut],mt={__name:"CategoryTrendsPreview",props:{groupData:{type:Array,default(){return[]}},categoryData:{type:Array,default(){return[]}}},setup(e){const n=e,o=M(!0),l=()=>{o.value=!o.value},f=p(()=>o.value?n.groupData:n.categoryData),m=p(()=>o.value?"Category Group":"Categories");return(u,v)=>(b(),k(h,{title:"Trends preview",action:{label:"Go to Trends",iconClass:"fa fa-chevron-right"},onAction:v[0]||(v[0]=_=>u.router.visit("/trends"))},{default:r(()=>[t("article",lt,[t("header",it,[t("h4",ct,c(m.value),1),t("button",{onClick:l,class:D(["transform animate",[!o.value&&"-rotate-180"]])},dt,2)]),a(W,{style:{height:"270px",background:"white",width:"100%"},series:f.value,label:"name",value:"total"},null,8,["series"])])]),_:1}))}},pt={class:"mt-4 space-y-4"},ft={class:"flex flex-wrap justify-between w-full overflow-hidden lg:space-x-4 lg:flex-nowrap"},vt={class:"w-full mx-auto space-y-2"},gt={class:"grid grid-cols-2 gap-2"},yt=t("span",null," See scheduled",-1),ht=t("i",{class:"ml-2 fa fa-chevron-right"},null,-1),bt=t("i",{class:"fa fa-plus"},null,-1),Kt={__name:"Index",props:{user:{type:Object,required:!0},planned:{type:Array,default(){return[]}},expensesByCategory:{type:Array,default(){return[]}},expensesByCategoryGroup:{type:Array,default(){return[]}},budgetTotal:{type:[Number,String],default:0},income:{type:[Number,String],default:0},savings:{type:[Number,String]},lastMonthIncome:{type:[Number,String],default:0},transactionTotal:{type:[Number,String],default:0},lastMonthExpenses:{type:[Number,String],default:0},transactions:{type:Array,default(){return[]}},categories:{type:Array,default(){return[]}},accounts:{type:Array,default(){return[]}},serverSearchOptions:{type:Object,default:()=>({})}},setup(e){const n=e,{serverSearchOptions:o}=E(n),{state:l,executeSearchWithDelay:f}=H(o,{manual:!0}),{categoryOptions:m}=G();m(n.categories,"accounts","categoryOptions"),m(n.accounts,"accounts","accountsOptions");const u=p(()=>{try{return L(J(l.dates.startDate,1),"MMM")}catch{return"LM"}}),v=p(()=>$(n.income,n.lastMonthIncome)),_=p(()=>$(n.transactionTotal,n.lastMonthExpenses)||0),A=n.expensesByCategory.slice(0,4),{openTransactionModal:N}=R(),O=x=>{N({transactionData:x})};return(x,i)=>(b(),k(F,null,{header:r(()=>[a(P,null,{actions:r(()=>[a(s(V),{class:"w-full h-12 border-none bg-base-lvl-1 text-body",startDate:s(l).dates.startDate,"onUpdate:startDate":i[0]||(i[0]=d=>s(l).dates.startDate=d),endDate:s(l).dates.endDate,"onUpdate:endDate":i[1]||(i[1]=d=>s(l).dates.endDate=d),onChange:s(f),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"month"},null,8,["startDate","endDate","onChange"]),t("div",null,[a(Y,{variant:"inverse"},{default:r(()=>[y(" Import Transactions ")]),_:1})])]),_:1})]),default:r(()=>[a(U,{title:"Finance",accounts:e.accounts,ref:"financeTemplateRef"},{default:r(()=>[t("section",pt,[a(h,{title:"Summary",class:"w-full"},{default:r(()=>[t("div",ft,[t("div",vt,[a(T,{class:"text-body-1 bg-base-lvl-1",title:"Income",value:s(g)(e.income),subtitle:`${u.value}: ${v.value}%`},null,8,["value","subtitle"]),a(T,{class:"text-body-1 bg-base-lvl-1",title:"Savings",value:s(g)(e.savings),subtitle:`Total: ${s(g)(e.savings)}`},null,8,["value","subtitle"]),a(Z,{goal:e.budgetTotal,current:e.transactionTotal,class:"h-8 text-white border-t rounded-b-lg"},null,8,["goal","current"])]),a(ot,{class:"w-full",title:"Expenses","variance-title":u.value,value:s(g)(e.transactionTotal),variance:_.value,"variance-amount":s(g)(e.lastMonthExpenses),onClick:i[2]||(i[2]=d=>s(w).visit("/finance/transactions"))},null,8,["variance-title","value","variance","variance-amount"])])]),_:1}),t("section",gt,[a(h,{title:"Planned Transactions",class:"hidden md:block"},{action:r(()=>[a(s(j),{class:"flex items-center text-primary",onClick:i[3]||(i[3]=d=>s(w).visit("/transactions?filter[status]=planned"))},{default:r(()=>[yt,ht]),_:1})]),default:r(()=>[a(S,{class:"w-full","table-class":"w-full p-2 overflow-auto text-sm rounded-t-lg shadow-md bg-base-lvl-3",transactions:e.planned,parser:s(q),onEdit:O},null,8,["transactions","parser"])]),_:1}),a(mt,{class:"w-full","category-data":s(A),"group-data":e.expensesByCategoryGroup},null,8,["category-data","group-data"])]),a(h,{title:"Transaction history",class:"w-full"},{action:r(()=>[t("button",{class:"text-primary",onClick:d=>""},[bt,y(" Add transaction ")])]),default:r(()=>[a(S,{class:"w-full","table-class":"overflow-auto text-sm",transactions:e.transactions,parser:s(z),onEdit:d=>""},null,8,["transactions","parser"])]),_:1})])]),_:1},8,["accounts"])]),_:1}))}};export{Kt as default};
