import{r as w,q as O,s as T,o as a,c as s,d as o,t as x,F as f,h as b,J as N,a as _,i as j,f as l,k as $,n as g,e as B,b as v,g as C,A as F,a1 as I,K as A,a6 as R}from"./app.d8e74fa3.js";import{E as V}from"./atmosphere-ui.87ba2c0a.js";import{_ as q}from"./AppLayout.9d561a06.js";import{u as z,_ as U,F as W}from"./useServerSearch.b930cc90.js";import{_ as D}from"./DonutChart.7a66c63a.js";import{f as k}from"./formatMoney.a91b934f.js";import{_ as L}from"./LogerChart.c63bf016.js";import{_ as J}from"./WidgetCard.e29b5449.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";import{a6 as G}from"./naiveui.0ad5ca37.js";import{p as H}from"./index.0c0b7522.js";import{u as M}from"./useCollapse.91d15f02.js";import{f as P}from"./index.9c3fb553.js";import"./Modal.36144344.js";/* empty css                                              */import"./LogerInput.c4e88f46.js";import"./SectionNav.164c7b94.js";import"./index.a33f79b6.js";import"./SectionTitle.5007996d.js";const Q={class:"w-full comparison-card"},X={class:"pb-10 px-5 rounded-lg"},Y={class:"card-title text-left p-4 font-bold"},Z={class:"card-text"},ee={class:"comparison-header px-10 text-body-1/50 space-x-2 divide-x divide-dashed divide-opacity-20 divide-body-1 bg-base-lvl-2 mb-2"},te=["onClick"],ae={class:"period-title"},se={class:"period-value"},re={__name:"ChartNetworth",props:{title:{type:String},type:{type:String,default:"bar"},data:{type:Object,required:!0}},setup(t){const n=t,p=e=>G(H(e),"MMMM"),i=w(),c=O(()=>[{name:"Debts",data:Object.values(n.data).map(e=>Math.abs(e.debts)),labels:Object.values(n.data).map(e=>e.month_date)},{name:"Assets",data:Object.values(n.data).map(e=>e.assets),labels:Object.values(n.data).map(e=>e.month_date)}]),d=T({headers:Object.entries(n.data).map(([e,r])=>({label:p(r.month_date),value:[r.debts,r.assets],id:r.month_date})),options:{colors:["#7B77D1","#F37EA1"]},series:c});return(e,r)=>(a(),s("div",Q,[o("div",X,[o("h5",Y,x(t.title),1),o("div",Z,[o("div",ee,[(a(!0),s(f,null,b(d.headers,m=>(a(),s("div",{key:m.id,onClick:u=>i.value=m.id,class:"comparison-header__item justify-center w-full items-center flex-col flex previous-period cursor-pointer hover:text-body/80"},[o("h6",ae,x(m.label),1),(a(!0),s(f,null,b(m.value,(u,h)=>(a(),s("span",se,[o("div",{class:"absolute -left-4 top-2 h-2 w-2 rounded-full",style:N({backgroundColor:d.options.colors[h]})},null,4),_(J),j(" "+x(l(k)(u)),1)]))),256))],8,te))),128))]),_(L,{label:"name",type:"bar",labels:l(c)[0].labels,options:d.options,series:d.series},null,8,["labels","options","series"])])])]))}},le=K(re,[["__scopeId","data-v-9001497b"]]),S={__name:"Collapse",props:{title:{type:String},titleClass:{type:String},gap:{type:Boolean,default:!0},contentClass:{type:String}},setup(t){const n=w(),{isCollapsed:p,icon:i,toggleCollapse:c}=M(n);return(d,e)=>(a(),s("article",{ref_key:"incomeRef",ref:n},[o("header",{class:g(["cursor-pointer",t.titleClass]),onClick:e[0]||(e[0]=r=>l(c)())},[$(d.$slots,"header",{icon:l(i),isCollapsed:l(p)},()=>[o("i",{class:g([l(i),"mr-2"])},null,2),$(d.$slots,"title",{},()=>[j(x(t.title),1)])])],2),l(p)?B("",!0):(a(),s("section",{key:0,class:g([t.gap&&"pl-4",t.contentClass])},[$(d.$slots,"content")],2))],512))}},E={__name:"TableCell",props:{col:{type:Object,required:!0},value:{type:[String,Number,Date]}},setup(t){return(n,p)=>(a(),s("div",{class:g(t.col.class)},x(t.col.render?t.col.render(t.value):t.value),3))}},ne={class:"px-4 py-2 divide-y"},oe={class:"flex mt-4 bg-base px-4 py-2"},ie={class:"mt-2"},ce={__name:"IncomeExpenses",props:{data:{type:Object}},setup(t){const n=t,p=w();M(p);const i=O(()=>[{field:"name",class:"font-bold text-sm"},...n.data.dateUnits.map(c=>({field:c,label:P(c),class:"text-right text-sm",render:d=>k(d||0)})),{field:"avg",label:"AVG",class:"text-right text-sm",render:c=>k(c||0)},{field:"total",label:"Total",class:"text-right text-sm",render:c=>k(c||0)}]);return(c,d)=>(a(),s("section",ne,[o("header",oe,[(a(!0),s(f,null,b(l(i),e=>(a(),s("div",{key:e.field,class:g(["w-full font-bold capitalize",e.class])},x(e.label||e.field),3))),128))]),_(S,{title:"Income","title-class":"text-success font-bold bg-base-lvl-1 hover:bg-base p-2","content-class":"pb-4",gap:!1},{content:v(()=>[(a(!0),s(f,null,b(t.data.incomeCategories,e=>(a(),s("div",{key:e.id,class:"flex space-x-2 group hover:bg-primary/5"},[(a(!0),s(f,null,b(l(i),r=>(a(),C(E,{key:r.field,class:g(["w-full px-2 py-2 cursor-pointer hover:font-bold hover:text-primary transition",{"group-hover:text-primary":r.field=="name"}]),title:r.label,col:r,value:t.data.incomes[e.name][r.field]},null,8,["class","title","col","value"]))),128))]))),128))]),_:1}),_(S,{title:"Expenses","title-class":"text-error font-bold bg-base-lvl-1 hover:bg-base p-2","content-class":"pb-4",gap:!1},{content:v(()=>[o("section",ie,[(a(!0),s(f,null,b(t.data.expenseCategories,(e,r)=>(a(),C(S,{title:r,"title-class":"font-bold bg-base-lvl-2 py-1 rounded-md px-2",key:r,class:"mt-2",gap:!1},{content:v(()=>[(a(!0),s(f,null,b(e,m=>(a(),s("div",{key:m.id,class:"flex space-x-2 group hover:bg-primary/5"},[(a(!0),s(f,null,b(l(i),u=>(a(),C(E,{key:u.field,class:g(["w-full px-2 py-2 cursor-pointer hover:font-bold hover:text-primary transition",{"group-hover:text-primary":u.field=="name"}]),title:u.label,col:u,value:t.data.expenses[`${r}:${m.name}`][u.field]},null,8,["class","title","col","value"]))),128))]))),128))]),_:2},1032,["title"]))),128))])]),_:1})]))}},de={class:"flex flex-wrap mt-5 md:flex-nowrap md:space-x-8"},ue={class:"w-full md:w-full"},pe={class:"divide-y-2"},Te={__name:"Trends",props:{user:{type:Object,required:!0},data:{type:Array,default(){return[]}},metaData:{type:Object},serverSearchOptions:{type:Object,default:()=>({})}},setup(t){const n=t,{serverSearchOptions:p}=F(n),{state:i,executeSearch:c}=z(p),d=u=>{const h=n.data[u];n.metaData.parent_name||R.Inertia.visit(`/trends/categories?filter[parent_id]=${h.id}`)},e=[{name:"Category Group Trends",link:"/trends"},{name:"Category Trends",link:"/trends/categories"},{name:"Net Worth",link:"/trends/net-worth"},{name:"Income v Expenses",link:"/trends/income-expenses"}],r={groups:D,categories:D,netWorth:le,incomeExpenses:ce},m=O(()=>r[n.metaData.name]||D);return(u,h)=>(a(),C(q,{title:t.metaData.title},{header:v(()=>[_(U,null,{actions:v(()=>[_(l(V),{class:"w-full h-12 border-none bg-base-lvl-1 text-body",startDate:l(i).dates.startDate,"onUpdate:startDate":h[0]||(h[0]=y=>l(i).dates.startDate=y),endDate:l(i).dates.endDate,"onUpdate:endDate":h[1]||(h[1]=y=>l(i).dates.endDate=y),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"month"},null,8,["startDate","endDate"])]),_:1})]),default:v(()=>[_(W,{title:"Finance",accounts:u.accounts,ref:"financeTemplateRef"},{panel:v(()=>[o("div",pe,[(a(),s(f,null,b(e,y=>_(l(I),{href:y.link,key:y.name,class:"block py-4 px-2 hover:bg-base-lvl-3 cursor-pointer"},{default:v(()=>[j(x(y.name),1)]),_:2},1032,["href"])),64))])]),default:v(()=>[o("section",null,[o("div",de,[o("div",ue,[(a(),C(A(l(m)),{style:{background:"white",width:"100%"},series:t.data,data:t.data,onClicked:d,label:"name",value:"total",legend:!1},null,40,["series","data"]))])])])]),_:1},8,["accounts"])]),_:1},8,["title"]))}};export{Te as default};
