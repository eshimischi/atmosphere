import{L as g}from"./atmosphere-ui-b819c890.js";import{B,C as T,q as p,o as c,c as m,w as o,u as e,a as r,b as O,f as w,h as A,O as n,i as f,t as F,F as I,g as L,D as N}from"./app-114b751b.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-c7e24bdb.js";import{_ as E}from"./TransactionSearch-04d8ffdc.js";import{u as M,_ as j,F as R}from"./useServerSearch-55d027ef.js";import{_ as U,a as q}from"./DraftButtons-c9fef7c0.js";import{_ as v}from"./LogerButton-7d66d0a8.js";import{t as z}from"./tableAccountCols-7e05d7b0.js";import{u as G}from"./isMobile-e3872359.js";import{a as H}from"./useFirebase-fe12e715.js";import"./formatMoney-75af80f0.js";import"./AppIcon-f342d706.js";/* empty css                                                */import"./Modal-c2871cdd.js";/* empty css                                              */import"./LogerInput-8ca4e824.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TransactionsTable-abfea9c2.js";import"./exact-math.node-ab123f44.js";import"./NumberHider-49c0aef0.js";import"./index-2052210e.js";import"./Progress-446b78be.js";import"./Dropdown-839d2ecf.js";import"./SectionTitle-20b8f2ca.js";import"./vue-draggable-next.esm-bundler-3a2dc928.js";import"./constants-cb26b0c1.js";import"./WidgetCard-f1e3a88f.js";import"./SectionNav-dd96bdd5.js";import"./CustomTable-970a440a.js";const J={class:"flex items-center w-full space-x-2"},Ct={__name:"Category",props:{transactions:{type:Object,default:()=>({data:[]})},accounts:{type:Array,default:()=>[]},categories:{type:Array,default(){return[]}},serverSearchOptions:{type:Object,default:()=>({})},accountId:{type:[Number,null]}},setup(l){const u=l,{openTransactionModal:b}=G(),{serverSearchOptions:d,accountId:_}=B(u),{state:i,executeSearch:K}=M(d,{manual:!0});T("selectedAccountId",_);const D=H(),h=p(()=>D.isMobile?E:U),y=p(()=>{var t;return((t=d.value.filters)==null?void 0:t.status)=="draft"}),k=t=>{n.delete(`/transactions/${t.id}`,{onSuccess(){n.reload()}})},x=t=>{n.patch(`/transactions/${t.id}/linked`,{onSuccess(){n.reload()}})},S=t=>{b({transactionData:t})},C={draft:{label:"Drafts",value:"/finance/transactions?filter[status]=draft&relationships=linked"},verified:{label:"Verified",value:"/finance/transactions?"},scheduled:{label:"Scheduled",value:"/finance/transactions?filter[status]=scheduled"}};return(t,s)=>(c(),m(V,{onBack:s[2]||(s[2]=a=>e(n).visit("/finance/transactions")),"show-back-button":!0},{header:o(()=>[r(j,null,{actions:o(()=>[O("div",J,[(c(),w(I,null,A(C,(a,$)=>r(v,{variant:"inverse",class:"",key:$,onClick:P=>e(n).visit(a.value)},{default:o(()=>[f(F(a.label),1)]),_:2},1032,["onClick"])),64)),r(e(g),{class:"w-full h-12 border-none bg-base-lvl-1 text-body",startDate:e(i).dates.startDate,"onUpdate:startDate":s[0]||(s[0]=a=>e(i).dates.startDate=a),endDate:e(i).dates.endDate,"onUpdate:endDate":s[1]||(s[1]=a=>e(i).dates.endDate=a),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"month"},null,8,["startDate","endDate"]),r(v,{variant:"inverse"},{default:o(()=>[f(" Import Transactions ")]),_:1}),y.value?(c(),m(q,{key:0})):L("",!0)])]),_:1})]),default:o(()=>[r(R,{title:"Transactions",accounts:l.accounts},{default:o(()=>[(c(),m(N(h.value),{cols:e(z)(u.accountId),transactions:l.transactions,"server-search-options":e(d),onFindLinked:x,onRemoved:k,onEdit:S},null,40,["cols","transactions","server-search-options"]))]),_:1},8,["accounts"])]),_:1}))}};export{Ct as default};
