import{_ as y,A as u,a as $}from"./atmosphere-ui.es.c3e31e0f.js";import{_ as x}from"./AppLayout.3e3cea3d.js";import{u as v,o as _,c as V,a,b as n,f as e,F as U,h as w,d as k,H as h,r as F,q as C,g as B,i as q}from"./app.ed3e752b.js";import{a as A}from"./TransactionModal.6a68c7aa.js";import{_ as N,a as I}from"./MealSectionNav.c400ada9.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Modal.1586865f.js";/* empty css                                              */import"./LogerInput.65190e93.js";import"./Select.c33131e1.js";import"./light.2fdb7969.js";import"./fade-in-scale-up.cssr.07c62ce8.js";import"./Suffix.8e8bf306.js";import"./Popover.b027aa1f.js";import"./format-length.7f3135aa.js";import"./DatePicker.4a87f282.js";import"./index.58d4bda5.js";import"./SectionTitle.f3bd16f6.js";import"./ImportResourceModal.0a88250c.js";import"./SectionNav.adfa71d4.js";const T={class:"text-body"},j=k("i",{class:"fa fa-trash"},null,-1),L={__name:"MealForm",props:{meal:{type:Object,default:()=>({name:""})}},emits:["close"],setup(c,{expose:p}){var f;const s=c,t=v({name:(f=s.meal)==null?void 0:f.name,ingredients:s.meal?[...s.meal.ingredients,{}]:[{}]}),g=async()=>{const d=s.meal?"put":"post",r=s.meal?`/meals/${s.meal.id}`:"/meals";t.transform(l=>({...l,ingredients:l.ingredients.filter(i=>i.name)})).submit(d,r,{onSuccess:async()=>{d=="post"&&(await h(),t.reset())}})},b=(d,r)=>{t.ingredients.length==d+1&&r&&t.ingredients.push({unit:"unit",quantity:1,product_id:"",name:""})},m=d=>{t.ingredients.splice(d,1);const r=t.ingredients.length-1;h(()=>{b(r,t.ingredients[r].name)})};return p({submit:g}),(d,r)=>(_(),V("div",T,[a(e(u),{label:"Title"},{default:n(()=>[a(e(y),{modelValue:e(t).name,"onUpdate:modelValue":r[0]||(r[0]=l=>e(t).name=l),rounded:"",class:"border text-body bg-base border-base-deep-1"},null,8,["modelValue"])]),_:1}),a(e(u),{label:"Ingredients"},{default:n(()=>[(_(!0),V(U,null,w(e(t).ingredients,(l,i)=>(_(),V("div",{class:"flex px-2 py-2 overflow-hidden rounded-md bg-base-lvl-1",key:l.id},[a(e(u),{class:"px-4",label:"Qty"},{default:n(()=>[a(e(y),{rounded:"",type:"number",modelValue:l.quantity,"onUpdate:modelValue":o=>l.quantity=o,class:"border border-none rounded-t-none rounded-b-none text-body bg-base border-base-deep-1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(e(u),{class:"w-full px-4",label:"Name"},{default:n(()=>[a(A,{modelValue:e(t).ingredients[i],"onUpdate:modelValue":o=>e(t).ingredients[i]=o,label:l.name,"onUpdate:label":[o=>l.name=o,o=>b(i,o)],class:"w-full",tag:"","custom-label":"name","track-id":"id",placeholder:"Add ingredient",endpoint:"/api/ingredients"},null,8,["modelValue","onUpdate:modelValue","label","onUpdate:label"])]),_:2},1024),a(e(u),{class:"px-4",label:"Unit"},{default:n(()=>[a(e(y),{rounded:"",modelValue:l.unit,"onUpdate:modelValue":o=>l.unit=o,class:"border border-none rounded-t-none rounded-b-none text-body bg-base border-base-deep-1"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(e(u),{label:"Actions"},{default:n(()=>[a(e($),{type:"danger",class:"items-center h-10",rounded:"",onClick:o=>m(i)},{default:n(()=>[j]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1})]))}},M=q(" Save "),ne={__name:"Create",props:{meals:{type:[Object,null],default:null}},setup(c){const p=c,s=F(null),t=()=>{s.value.submit()},g=C(()=>p.meals?`Meals / ${p.meals.name}`:"Create recipe");return(b,m)=>(_(),B(x,{title:e(g),"show-back-button":!0,onBack:m[1]||(m[1]=f=>b.$inertia.visit("/meal-planner"))},{header:n(()=>[a(N,null,{actions:n(()=>[k("div",null,[a(e($),{class:"h-10 text-white bg-primary",rounded:"",onClick:m[0]||(m[0]=f=>t())},{default:n(()=>[M]),_:1})])]),_:1})]),default:n(()=>[a(I,{class:"mx-auto","show-meal-types":!1},{default:n(()=>[a(L,{ref_key:"mealForm",ref:s,meal:c.meals},null,8,["meal"])]),_:1})]),_:1},8,["title"]))}};export{ne as default};
