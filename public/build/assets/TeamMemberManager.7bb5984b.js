import{J as O}from"./ActionMessage.bb69870e.js";import{_ as w}from"./ActionSection.103e5cd2.js";import{J as U}from"./Button.a971053d.js";import{J as B}from"./ConfirmationModal.2f62c1f3.js";import{J as S}from"./DangerButton.ca47622b.js";import{J as q}from"./DialogModal.744c9850.js";import{J as G}from"./FormSection.d71e7ca8.js";import{J as x}from"./SecondaryButton.604e3937.js";import{J as C}from"./SectionBorder.46403b51.js";import{_ as H}from"./LogerInput.b9b0f9d1.js";import{A as $,a as J}from"./atmosphere-ui.es.4435c64a.js";import{u as y,s as K,o as n,c as i,a as r,b as o,e as u,f as t,g as A,d as a,F as _,h as p,n as f,t as b,i as d,S as Q}from"./app.8c4d85cf.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./SectionTitle.35e76227.js";import"./Modal.414ced84.js";/* empty css                                              */const W={key:0},X=a("div",{class:"col-span-6"},[a("div",{class:"max-w-xl text-sm text-body-1"}," Please provide the email address of the person you would like to add to this team. ")],-1),Y={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Z=["onClick"],ee={class:"flex items-center"},te={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},oe=a("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),se=[oe],ne={class:"mt-2 text-xs text-gray-600"},ae=d(" Added. "),ie=d(" Add "),re={key:1},le={class:"space-y-6"},me={class:"text-gray-600"},de={class:"flex items-center space-x-2"},ce=["onClick"],ue=d(" Send Invitation "),ve={key:2},ge=d(" Team Members "),fe=d(" All of the people that are part of this team. "),be={class:"space-y-6"},he={class:"flex items-center"},ye=["src","alt"],_e={class:"ml-4"},pe={class:"flex items-center"},ke=["onClick"],Re={key:1,class:"ml-2 text-sm text-gray-400"},Me=["onClick"],xe=d(" Manage Role "),Ce={key:0},Te={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},we=["onClick"],Be={class:"flex items-center"},Se={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},$e=a("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1),Je=[$e],Ae={class:"mt-2 text-xs text-gray-600"},Fe=d(" Cancel "),Le=d(" Save "),Pe=d(" Leave Team "),je=d(" Are you sure you would like to leave this team? "),ze=d(" Cancel "),Ve=d(" Leave "),Ie=d(" Remove Team Member "),Ne=d(" Are you sure you would like to remove this person from the team? "),De=d(" Cancel "),Ee=d(" Remove "),at={__name:"TeamMemberManager",props:["team","availableRoles","userPermissions"],setup(l){const k=l,c=y({email:"",role:null}),v=y({role:null}),R=y(),M=y(),h=K({currentlyManagingRole:!1,managingRoleFor:null,confirmingLeavingTeam:!1,teamMemberBeingRemoved:null});function F(){c.post(route("team-members.store",k.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>c.reset()})}function L(s){y().put(route("team-invitations.resend",s),{preserveScroll:!0})}function P(s){Q.Inertia.delete(route("team-invitations.destroy",s),{preserveScroll:!0})}function j(s){h.managingRoleFor=s,v.role=s.membership.role,h.currentlyManagingRole=!0}function z(){v.put(route("team-members.update",[k.team,h.managingRoleFor]),{preserveScroll:!0,onSuccess:()=>this.currentlyManagingRole=!1})}function V(){h.confirmingLeavingTeam=!0}function I(){R.delete(route("team-members.destroy",[this.team,this.$page.props.user]))}function N(s){h.teamMemberBeingRemoved=s}function D(){M.delete(route("team-members.destroy",[this.team,this.teamMemberBeingRemoved]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>this.teamMemberBeingRemoved=null})}function T(s){return k.availableRoles.find(m=>m.key===s).name}return(s,m)=>(n(),i("div",null,[l.userPermissions.canAddTeamMembers?(n(),i("div",W,[r(C),r(G,{title:"Add Team Member",description:"Add a new team member to your team, allowing them to collaborate with you.",onSubmitted:F},{form:o(()=>[X,r(t($),{class:"col-span-6 sm:col-span-4",label:"Email",field:"email",errors:t(c).errors},{default:o(()=>[r(H,{id:"email",type:"email",modelValue:t(c).email,"onUpdate:modelValue":m[0]||(m[0]=e=>t(c).email=e)},null,8,["modelValue"])]),_:1},8,["errors"]),l.availableRoles.length>0?(n(),A(t($),{key:0,class:"col-span-6 lg:col-span-4",field:"roles",label:"Role",errors:t(c).errors},{default:o(()=>[a("div",Y,[(n(!0),i(_,null,p(l.availableRoles,(e,g)=>(n(),i("button",{type:"button",class:f(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":g>0,"rounded-b-none":g!=Object.keys(l.availableRoles).length-1}]),onClick:E=>t(c).role=e.key,key:e.key},[a("div",{class:f({"opacity-50":t(c).role&&t(c).role!=e.key})},[a("div",ee,[a("div",{class:f(["text-sm text-gray-600",{"font-semibold":t(c).role==e.key}])},b(e.name),3),t(c).role==e.key?(n(),i("svg",te,se)):u("",!0)]),a("div",ne,b(e.description),1)],2)],10,Z))),128))])]),_:1},8,["errors"])):u("",!0)]),actions:o(()=>[r(O,{on:t(c).recentlySuccessful,class:"mr-3"},{default:o(()=>[ae]),_:1},8,["on"]),r(t(J),{type:"primary","is-loading":t(c).processing,disabled:t(c).processing},{default:o(()=>[ie]),_:1},8,["is-loading","disabled"])]),_:1})])):u("",!0),l.team.team_invitations.length>0&&l.userPermissions.canAddTeamMembers?(n(),i("div",re,[r(C),r(w,{class:"mt-10 sm:mt-0",title:" Pending Team Invitations",description:"These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation."},{content:o(()=>[a("div",le,[(n(!0),i(_,null,p(l.team.team_invitations,e=>(n(),i("div",{class:"flex items-center justify-between",key:e.id},[a("div",me,b(e.email),1),a("div",de,[l.userPermissions.canRemoveTeamMembers?(n(),i("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:g=>P(e)}," Cancel ",8,ce)):u("",!0),l.userPermissions.canRemoveTeamMembers?(n(),A(t(J),{key:1,class:"text-white rounded-lg bg-primary",onClick:g=>L(e)},{default:o(()=>[ue]),_:2},1032,["onClick"])):u("",!0)])]))),128))])]),_:1})])):u("",!0),l.team.users.length>0?(n(),i("div",ve,[r(C),r(w,{class:"mt-10 sm:mt-0"},{title:o(()=>[ge]),description:o(()=>[fe]),content:o(()=>[a("div",be,[(n(!0),i(_,null,p(l.team.users,e=>(n(),i("div",{class:"flex items-center justify-between",key:e.id},[a("div",he,[a("img",{class:"w-8 h-8 rounded-full",src:e.profile_photo_url,alt:e.name},null,8,ye),a("div",_e,b(e.name),1)]),a("div",pe,[l.userPermissions.canAddTeamMembers&&l.availableRoles.length?(n(),i("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:g=>j(e)},b(T(e.membership.role)),9,ke)):l.availableRoles.length?(n(),i("div",Re,b(T(e.membership.role)),1)):u("",!0),s.$page.props.user.id===e.id?(n(),i("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:V}," Leave ")):u("",!0),l.userPermissions.canRemoveTeamMembers?(n(),i("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:g=>N(e)}," Remove ",8,Me)):u("",!0)])]))),128))])]),_:1})])):u("",!0),r(q,{show:s.currentlyManagingRole,onClose:m[2]||(m[2]=e=>s.currentlyManagingRole=!1)},{title:o(()=>[xe]),content:o(()=>[s.managingRoleFor?(n(),i("div",Ce,[a("div",Te,[(n(!0),i(_,null,p(l.availableRoles,(e,g)=>(n(),i("button",{type:"button",class:f(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":g>0,"rounded-b-none":g!==Object.keys(l.availableRoles).length-1}]),onClick:E=>t(v).role=e.key,key:e.key},[a("div",{class:f({"opacity-50":t(v).role&&t(v).role!==e.key})},[a("div",Be,[a("div",{class:f(["text-sm text-gray-600",{"font-semibold":t(v).role===e.key}])},b(e.name),3),t(v).role===e.key?(n(),i("svg",Se,Je)):u("",!0)]),a("div",Ae,b(e.description),1)],2)],10,we))),128))])])):u("",!0)]),footer:o(()=>[r(x,{onClick:m[1]||(m[1]=e=>s.currentlyManagingRole=!1)},{default:o(()=>[Fe]),_:1}),r(U,{class:f(["ml-2",{"opacity-25":t(v).processing}]),onClick:z,disabled:t(v).processing},{default:o(()=>[Le]),_:1},8,["class","disabled"])]),_:1},8,["show"]),r(B,{show:s.confirmingLeavingTeam,onClose:m[4]||(m[4]=e=>s.confirmingLeavingTeam=!1)},{title:o(()=>[Pe]),content:o(()=>[je]),footer:o(()=>[r(x,{onClick:m[3]||(m[3]=e=>s.confirmingLeavingTeam=!1)},{default:o(()=>[ze]),_:1}),r(S,{class:f(["ml-2",{"opacity-25":t(R).processing}]),onClick:I,disabled:t(R).processing},{default:o(()=>[Ve]),_:1},8,["class","disabled"])]),_:1},8,["show"]),r(B,{show:s.teamMemberBeingRemoved,onClose:m[6]||(m[6]=e=>s.teamMemberBeingRemoved=null)},{title:o(()=>[Ie]),content:o(()=>[Ne]),footer:o(()=>[r(x,{onClick:m[5]||(m[5]=e=>s.teamMemberBeingRemoved=null)},{default:o(()=>[De]),_:1}),r(S,{class:f(["ml-2",{"opacity-25":t(M).processing}]),onClick:D,disabled:t(M).processing},{default:o(()=>[Ee]),_:1},8,["class","disabled"])]),_:1},8,["show"])]))}};export{at as default};
