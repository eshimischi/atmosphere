import{x as v,p as x,o as r,c as A,w as l,a as c,i as k,b as o,e as d,h as p,t as a,F as u,M as w,O as b}from"./app-fc313f38.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-87835da0.js";import{_ as M}from"./AutomationModal-fda2532a.js";import{_ as O}from"./SettingsSectionNav-44275bfa.js";import{_ as S}from"./LogerButton-370ed8f9.js";import"./atmosphere-ui-5b718e83.js";import"./isMobile-3d69cdae.js";import"./formatMoney-da670e0a.js";import"./index-975c57c9.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./AppIcon-36bb04e5.js";/* empty css                                                */import"./Modal-ca404241.js";/* empty css                                              */import"./LogerInput-2f23c230.js";import"./SectionNav-7e8b141c.js";import"./Dropdown-1335b583.js";const $={class:"h-auto py-12 pt-32 mx-auto space-y-4 max-w-7xl sm:px-6 lg:px-8"},I=["onClick"],B=["src"],L={class:"ml-5"},N={class:"ml-2"},V={class:"w-full integrations-form"},F={class:"left"},T={class:"head"},D={class:"tagline"},E={class:"text-right automations"},G=o("div",{class:"text-right options"},"options",-1),st={__name:"Integrations",props:{services:{type:Array,default(){return[]}},integrations:{type:Array,default(){return[]}},recipes:{type:Array,default(){return[]}},tasks:{type:Array,default(){return[]}}},setup(s){const m=s,i=v({showAddConnection:!1,authInstance:null,isAutomationModalOpen:!1,openedAutomation:{}}),_=(e,n)=>{i.isAutomationModalOpen=!0,i.openedAutomation={board:e,stage:n}},g=()=>{w(()=>{i.isAutomationModalOpen=!1,b.reload("/integrations",{only:["integrations"],preserveState:!0})})},h=e=>{switch(e.name.toLowerCase()){case"google":case"gmail":y(e.name.toLowerCase());break}},f=x(()=>m.services.filter(e=>e.type=="external")),y=()=>{const e=m.services.find(t=>t.name="Google"),n={service_id:e.id,service_name:e.name};axios({url:"/services/google",method:"post",data:{credentials:n}}).then(({data:t})=>{location.href=t})};return(e,n)=>(r(),A(C,{title:"Settings - Integrations"},{header:l(()=>[c(O,null,{actions:l(()=>[c(S,{variant:"inverse",class:"text-white bg-primary",onClick:_},{default:l(()=>[k(" Add Automation ")]),_:1})]),_:1})]),default:l(()=>[o("div",$,[(r(!0),d(u,null,p(f.value,t=>(r(),d("div",{key:t.id,onClick:j=>h(t),class:"flex px-5 py-3 rounded-md shadow-xl cursor-pointer bg-base-lvl-3"},[o("div",null,[o("img",{src:t.logo,class:"w-9"},null,8,B)]),o("h2",L,a(t.name),1),o("p",N,a(t.description),1)],8,I))),128)),o("div",V,[(r(!0),d(u,null,p(s.integrations,t=>(r(),d("div",{class:"grid grid-cols-3 px-5 py-3 my-2 font-bold text-gray-500 cursor-pointer bg-base-lvl-1 app-service__item",key:t.id},[o("div",F,[o("div",T,a(t.name)+" "+a(t.hash),1),o("div",D,a(t.hash)+" "+a(t.created_at),1)]),o("div",E,a(t==null?void 0:t.automations.length),1),G]))),128))]),c(M,{show:i.isAutomationModalOpen,"record-data":e.openedAutomation,closeable:!0,title:"Add a new automation",services:s.services,integrations:s.integrations,recipes:s.recipes,tasks:s.tasks,type:"event",onCancel:n[0]||(n[0]=t=>i.isAutomationModalOpen=!1),onSaved:g},null,8,["show","record-data","services","integrations","recipes","tasks"])])]),_:1}))}};export{st as default};
