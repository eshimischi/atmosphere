import{e as N}from"./exact-math.node-672740b8.js";import{f as B}from"./formatMoney-da670e0a.js";import{p as g,o as i,e as c,b as a,g as p,t as v,a as D,i as V,u as b,c as S,w,j,n as k,q as E,x as I,F as A,h as R,S as P}from"./app-fc313f38.js";import{_ as U}from"./NumberHider-888bcf03.js";import{a as O}from"./index-3a6f8c36.js";import{N as F}from"./Progress-f6cc10fb.js";import{N as L}from"./Dropdown-1335b583.js";import{_ as Z}from"./SectionTitle-df81ac17.js";import{Z as H}from"./atmosphere-ui-5b718e83.js";let x;const q=new Uint8Array(16);function z(){if(!x&&(x=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!x))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return x(q)}const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function Y(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}const G=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),M={randomUUID:G};function T(e,t,l){if(M.randomUUID&&!t&&!e)return M.randomUUID();e=e||{};const s=e.random||(e.rng||z)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){l=l||0;for(let d=0;d<16;++d)t[l+d]=s[d];return t}return Y(s)}const De=e=>e.map(t=>{var l,s,d;return{id:t.id||T(),date:t.date,title:t.description,subtitle:(l=t.account)!=null&&l.name?`${(s=t.account)==null?void 0:s.name} -> ${(d=t.category)==null?void 0:d.name}`:"",value:t.total,status:"VERIFIED",currencyCode:t.currency_code}}),Ee=e=>e.map(t=>{var l,s;return{id:t.id||T(),title:t.description,subtitle:(l=t.category)==null?void 0:l.name,value:t.total,valueSubtitle:(s=t.account)==null?void 0:s.name,status:"VERIFIED",currencyCode:t.currency_code}}),Ne=e=>e.map(t=>{var l,s;return{id:t.id,date:t.date,title:t.description,subtitle:`${(l=t.account)==null?void 0:l.name} -> ${((s=t.category)==null?void 0:s.name)??""} `,value:t.total,status:"PLANNED"}}),J={class:"flex justify-between px-5 py-2"},K={class:"flex space-x-3"},Q={key:0,class:"flex items-center h-full"},W=["checked"],X={class:"md:flex items-center hidden justify-center w-20 px-5 py-3 font-bold text-center transition-all rounded-md bg-base-lvl-3 group-hover:bg-primary group-hover:text-white group-body-1"},_={class:"font-bold"},ee={class:"text-sm"},te={class:"flex space-x-5"},le={class:"text-right"},ae={class:"relative font-bold"},se={key:0,class:"text-red-500"},oe={class:"block text-sm"},ne=a("button",{class:"hover:bg-base-lvl-3 px-2"},[a("i",{class:"fa fa-ellipsis-v"})],-1),de={key:0,class:"px-5"},ie={__name:"TransactionCard",props:{title:String,subtitle:String,date:String,value:String,valueSubtitle:String,currencyCode:String,status:String,markAsPaid:Boolean,markAsApproved:Boolean,expenses:Number,allowEdit:Boolean,allowRemove:Boolean,allowSelect:Boolean,isSelected:Boolean},emits:["selected","remove"],setup(e,{emit:t}){const l=e,s=g(()=>(Number(l.expenses||0)/Number(l.value||0)*100).toFixed(2)),d=()=>{l.allowSelect&&t("selected")},f=g(()=>[{name:"edit",label:"Edit",hide:!l.allowEdit},{name:"markAsPaid",label:"Mark as paid",hide:!l.markAsPaid},{name:"approved",label:"Approve",hide:!l.markAsApproved},{name:"removed",label:"Remove",hide:!l.allowRemove}].filter(o=>!o.hide)),$=g(()=>Object.keys(f.value).length),C=y=>{t(y)};return(y,o)=>(i(),c("div",{class:k(["transition text-slate-body group",[e.allowSelect&&"cursor-pointer hover:bg-base-lvl-3 border-2 border-transparent hover:border-primary",e.isSelected?"odd:bg-primary-100 even:bg-primary":"odd:bg-base-lvl-2 even:bg-base-lvl-1"]])},[a("div",J,[a("div",K,[e.allowSelect?(i(),c("div",Q,[a("input",{type:"checkbox",checked:e.isSelected,onChange:o[0]||(o[0]=m=>d())},null,40,W)])):p("",!0),a("div",X,v(e.title.slice(0,1)),1),a("div",null,[a("h4",_,v(e.title),1),a("small",ee,v(e.subtitle),1)])]),a("div",te,[a("div",le,[a("h4",ae,[D(U),V(" "+v(b(B)(e.value,e.currencyCode))+" ",1),e.expenses?(i(),c("span",se,"("+v(b(B)(e.expenses,e.currencyCode))+")",1)):p("",!0)]),a("small",oe,v(e.date?b(O)(e.date):e.valueSubtitle),1)]),$.value?(i(),S(b(L),{key:0,trigger:"click","key-field":"name",options:f.value,"on-select":C,onClick:o[1]||(o[1]=j(()=>{},["stop"]))},{default:w(()=>[ne]),_:1},8,["options"])):p("",!0)])]),e.expenses?(i(),c("div",de,[D(b(F),{percentage:s.value,"stroke-width":1,height:"2px","border-radius":"0"},null,8,["percentage"])])):p("",!0)],2))}},re={class:"flex justify-between"},ce={class:"flex items-center justify-end w-full"},ue={__name:"SectionCard",props:{classes:{type:String,default:"mt-1"},cardClass:{type:String,default:"mt-2 bg-base-lvl-3 border border-base rounded-lg shadow-md"},sectionTitle:{type:String,default:""},action:{type:[Object,null]}},emits:["action"],setup(e){return(t,l)=>(i(),c("div",{class:k([e.classes,"overflow-hidden text-body-1"])},[a("div",re,[D(Z,{type:"secondary",class:"w-full"},{default:w(()=>[V(v(e.sectionTitle),1)]),_:1}),a("div",ce,[e.action||t.$slots.action?E(t.$slots,"action",{key:0},()=>[e.action?(i(),S(b(H),{key:0,class:"flex items-center text-primary",onClick:l[0]||(l[0]=s=>t.$emit("action"))},{default:w(()=>[a("span",null,v(e.action.label),1),e.action.iconClass?(i(),c("i",{key:0,class:k(["ml-2",e.action.iconClass])},null,2)):p("",!0)]),_:1})):p("",!0)]):p("",!0)])]),a("div",{class:k([e.cardClass,"overflow-hidden border-base"])},[E(t.$slots,"default")],2)],2))}},me={key:0,class:"flex items-center justify-between px-4 py-5 bg-base-lvl-1 text-body-1"},ve=a("div",{class:"font-bold"},"Selected Items sum",-1),pe={class:"space-y-1 text-right"},ye={key:1,class:"items-center justify-center px-5 py-6 text-center text-gray-600"},he=a("div",{class:"mx-auto text-6xl"},[a("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"mx-auto iconify iconify--iconoir",width:"1em",height:"1em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},[a("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},[a("path",{d:"M7 2h9.5L21 6.5V19"}),a("path",{d:"M3 20.5v-14A1.5 1.5 0 0 1 4.5 5h9.752a.6.6 0 0 1 .424.176l3.148 3.148A.6.6 0 0 1 18 8.75V20.5a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 3 20.5Z"}),a("path",{fill:"currentColor",d:"M14 8.4V5.354a.354.354 0 0 1 .604-.25l3.292 3.292a.353.353 0 0 1-.25.604H14.6a.6.6 0 0 1-.6-.6Z"})])])],-1),be=a("span",{class:"mt-10 text-lg font-bold"}," No transactions found ",-1),ge=[he,be],Re={__name:"TransactionsTable",props:{classes:{type:String,default:"mt-1"},tableClass:{type:String,default:"mt-2 bg-base-lvl-1 border border-base-deep-1 rounded-lg shadow-md"},tableLabel:{type:String,default:""},transactions:{type:Array,default(){return[]}},parser:{type:[Function,null],default:null},showSum:{type:Boolean,default:!1},allowMarkAsPaid:{type:Boolean,default:!1},allowMarkAsApproved:{type:Boolean,default:!1},allowRemove:{type:Boolean,default:!1},allowSelect:{type:Boolean,default:!1},allowEdit:{type:Boolean,default:!1}},emits:["update:selected","edit","paid-clicked","approved","removed"],setup(e,{emit:t}){const l=e,s=g(()=>l.parser?l.parser(l.transactions):l.transactions),d=I([]),f=o=>d.includes(o.id||o.title),$=o=>{if(l.allowSelect){const m=o.id||o.title;f(o)?d.splice(d.indexOf(m),1):d.push(m)}t("update:selected",d)},C=g(()=>y(d));g(()=>y(s.value.map(o=>o.id)));const y=o=>o.reduce((m,r)=>{const u=s.value.find(h=>h.id===r||h.title===r);return u&&(m[u.currencyCode]?m[u.currencyCode]=N.add(m[u.currencyCode],u.value):m[u.currencyCode]=N.add(0,u.value)),m},{});return(o,m)=>(i(),S(ue,{classes:e.classes,"section-title":e.tableLabel,"card-class":e.tableClass},{action:w(()=>[E(o.$slots,"action")]),default:w(()=>[a("div",null,[s.value.length?(i(),c(A,{key:0},[(i(!0),c(A,null,R(s.value,(r,u)=>(i(),S(ie,P(r,{"mark-as-paid":e.allowMarkAsPaid,"mark-as-approved":e.allowMarkAsApproved,"allow-remove":e.allowRemove,"allow-select":e.allowSelect,"allow-edit":e.allowEdit,key:r.id,isSelected:f(r),class:"odd:bg-base-lvl-1 even:bg-base-lvl-2",onSelected:h=>$(r),onPaidClicked:h=>o.$emit("paid-clicked",r),onApproved:h=>o.$emit("approved",r),onRemoved:h=>o.$emit("removed",r),onEdit:h=>o.$emit("edit",e.transactions[u])}),null,16,["mark-as-paid","mark-as-approved","allow-remove","allow-select","allow-edit","isSelected","onSelected","onPaidClicked","onApproved","onRemoved","onEdit"]))),128)),e.showSum?(i(),c("div",me,[ve,a("div",pe,[(i(!0),c(A,null,R(C.value,(r,u)=>(i(),c("div",null,v(b(B)(r,u)),1))),256))])])):p("",!0)],64)):(i(),c("div",ye,ge))])]),_:3},8,["classes","section-title","card-class"]))}};export{Re as _,Ee as f,Ne as p,De as t};
