import{i as c,Z as k}from"./atmosphere-ui.df5681b0.js";import{h as v,_}from"./AppLayout.d865f89d.js";import{o as m,c as p,a,b as l,f as i,t as h,g as $,d as x,u as w,F,h as C,G as U,r as q,q as B,i as N}from"./app.cf37a944.js";import{_ as y}from"./LogerInput.572fb66a.js";import{_ as j,a as O}from"./MealTemplate.9cf56a60.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./naiveui.c9ccbfb7.js";import"./Modal.0d748749.js";/* empty css                                              */import"./SectionNav.5be3a928.js";import"./SectionTitle.d24cbe5a.js";const I={class:"flex px-2 py-2 overflow-hidden rounded-md bg-base-lvl-3"},L={key:0,class:"capitalize"},M=x("i",{class:"fa fa-trash"},null,-1),S={__name:"MealFormLine",props:{meal:{type:Object,default:()=>({name:""})},ingredient:{type:Object,required:!0},index:{type:Number}},emits:["close"],setup(n){return(s,e)=>(m(),p("div",I,[a(i(c),{class:"px-4",label:"Qty"},{default:l(()=>[a(y,{bordered:"",rounded:"",type:"number",modelValue:n.ingredient.quantity,"onUpdate:modelValue":e[0]||(e[0]=t=>n.ingredient.quantity=t)},null,8,["modelValue"])]),_:1}),a(i(c),{class:"w-full px-4",label:"Name"},{default:l(()=>[n.ingredient.product_id?(m(),p("div",L,h(n.ingredient.name),1)):(m(),$(v,{key:1,modelValue:n.ingredient.product_id,"onUpdate:modelValue":e[1]||(e[1]=t=>n.ingredient.product_id=t),label:n.ingredient.name,"onUpdate:label":[e[2]||(e[2]=t=>n.ingredient.name=t),e[3]||(e[3]=t=>s.$emit("check",t))],class:"w-full",tag:"","custom-label":"name","track-id":"id",placeholder:"Add ingredient",endpoint:"/api/ingredients"},null,8,["modelValue","label"]))]),_:1}),a(i(c),{class:"px-4",label:"Unit"},{default:l(()=>[a(y,{rounded:"",modelValue:n.ingredient.unit,"onUpdate:modelValue":e[4]||(e[4]=t=>n.ingredient.unit=t),class:"border border-none rounded-t-none rounded-b-none text-body bg-base border-base-deep-1"},null,8,["modelValue"])]),_:1}),a(i(c),{label:"Actions"},{default:l(()=>[a(i(k),{type:"danger",class:"items-center h-10",rounded:"",onClick:e[5]||(e[5]=t=>s.removeIngredient(n.index))},{default:l(()=>[M]),_:1})]),_:1})]))}},T={class:"text-body"},A={__name:"MealForm",props:{meal:{type:Object,default:()=>({name:""})}},emits:["close"],setup(n,{expose:s}){var d;const e=n,t=w({name:(d=e.meal)==null?void 0:d.name,ingredients:e.meal?[...e.meal.ingredients,{}]:[{}]}),b=async()=>{const r=e.meal?"put":"post",u=e.meal?`/meals/${e.meal.id}`:"/meals";t.transform(o=>({...o,ingredients:o.ingredients.filter(f=>f.name)})).submit(r,u,{onSuccess:async()=>{r=="post"&&(await U(),t.reset())}})},g=(r,u)=>{t.ingredients.length==r+1&&u&&t.ingredients.push({unit:"unit",quantity:1,product_id:"",name:""})};return s({submit:b}),(r,u)=>(m(),p("div",T,[a(i(c),{label:"Title"},{default:l(()=>[a(y,{modelValue:i(t).name,"onUpdate:modelValue":u[0]||(u[0]=o=>i(t).name=o),rounded:""},null,8,["modelValue"])]),_:1}),a(i(c),{label:"Ingredients"},{default:l(()=>[(m(!0),p(F,null,C(i(t).ingredients,(o,f)=>(m(),$(S,{key:`${o.id}-${f}`,meal:n.meal,index:f,ingredient:o,onCheck:V=>g(f,V)},null,8,["meal","index","ingredient","onCheck"]))),128))]),_:1})]))}},Z=N(" Save "),X={__name:"Create",props:{meals:{type:[Object,null],default:null}},setup(n){const s=n,e=q(null),t=()=>{e.value.submit()},b=B(()=>s.meals?`Meals / ${s.meals.name}`:"Create recipe");return(g,d)=>(m(),$(_,{title:i(b),"show-back-button":!0,onBack:d[1]||(d[1]=r=>g.$inertia.visit("/meal-planner"))},{header:l(()=>[a(j,null,{actions:l(()=>[x("div",null,[a(i(k),{class:"h-10 text-white bg-primary",rounded:"",onClick:d[0]||(d[0]=r=>t())},{default:l(()=>[Z]),_:1})])]),_:1})]),default:l(()=>[a(O,{class:"mx-auto","show-meal-types":!1},{default:l(()=>[a(A,{ref_key:"mealForm",ref:e,meal:n.meals,class:"bg-base-lvl-3 rounded-md px-4 py-2"},null,8,["meal"])]),_:1})]),_:1},8,["title"]))}};export{X as default};
