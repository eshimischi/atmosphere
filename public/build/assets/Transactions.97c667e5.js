import{E as g}from"./atmosphere-ui.87ba2c0a.js";import{A as $,q as p,B as w,o as l,g as f,b as o,a as i,d as u,f as r,e as I,c as B,h as C,n as F,t as T,F as A,a6 as c}from"./app.d8e74fa3.js";import{_ as E}from"./AppLayout.9d561a06.js";import"./WidgetCard.e29b5449.js";/* empty css                                              */import{a7 as O}from"./naiveui.0ad5ca37.js";import{u as V,_ as L,F as N}from"./useServerSearch.b930cc90.js";import{_ as j,a as M}from"./DraftButtons.46e52ea7.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Modal.36144344.js";import"./LogerInput.c4e88f46.js";import"./SectionTitle.5007996d.js";import"./formatMoney.a91b934f.js";import"./SectionNav.164c7b94.js";import"./index.0c0b7522.js";import"./CustomTable.a87f8f94.js";import"./index.bb0ccf69.js";import"./Dropdown.8b34b419.js";const R={class:"flex items-center w-full space-x-2"},U={class:"flex text-white rounded-md bg-primary border border-primary min-w-max overflow-hidden"},q=["onClick"],dt={__name:"Transactions",props:{transactions:{type:Object,default:()=>({data:[]})},accounts:{type:Array,default:()=>[]},categories:{type:Array,default(){return[]}},serverSearchOptions:{type:Object,default:()=>({})},accountId:{type:[Number,null]}},setup(d){const v=d,{openTransferModal:b}=O(),{serverSearchOptions:s}=$(v),{state:n,executeSearch:z}=V(s),h=p(()=>{var t;return(t=s.value.filters)==null?void 0:t.account_id});w("selectedAccountId",h.value);const y=p(()=>{var t;return((t=s.value.filters)==null?void 0:t.status)=="draft"}),D=t=>{c.Inertia.delete(`/transactions/${t.id}`,{onSuccess(){c.Inertia.reload()}})},S=t=>{c.Inertia.patch(`/transactions/${t.id}/linked`,{onSuccess(){c.Inertia.reload()}})},_=t=>{b({transactionData:t})},k={draft:{label:"Drafts",value:"/finance/transactions?filter[status]=draft&relationships=linked"},verified:{label:"Verified",value:"/finance/transactions?"},scheduled:{label:"Scheduled",value:"/finance/transactions?filter[status]=scheduled"}},x=t=>{var e;return(((e=s.value.filters)==null?void 0:e.status)||"verified")==t};return(t,a)=>(l(),f(E,{onBack:a[2]||(a[2]=e=>t.$inertia.visit(t.route("finance"))),"show-back-button":!0},{header:o(()=>[i(L,null,{actions:o(()=>[u("div",R,[r(y)?(l(),f(j,{key:0})):I("",!0),u("div",U,[(l(),B(A,null,C(k,(e,m)=>u("button",{class:F(["px-2 py-1.5 flex items-center border border-transparent hover:bg-accent",{"bg-white text-primary border-primary hover:text-white":x(m)}]),key:m,onClick:G=>t.$inertia.visit(e.value)},T(e.label),11,q)),64))]),i(r(g),{class:"w-full h-12 border-none bg-base-lvl-1 text-body",startDate:r(n).dates.startDate,"onUpdate:startDate":a[0]||(a[0]=e=>r(n).dates.startDate=e),endDate:r(n).dates.endDate,"onUpdate:endDate":a[1]||(a[1]=e=>r(n).dates.endDate=e),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"month"},null,8,["startDate","endDate"])])]),_:1})]),default:o(()=>[i(N,{title:"Transactions",accounts:d.accounts},{default:o(()=>[i(M,{transactions:d.transactions.data,"server-search-options":r(s),onFindLinked:S,onRemoved:D,onEdit:_},null,8,["transactions","server-search-options"])]),_:1},8,["accounts"])]),_:1}))}};export{dt as default};
