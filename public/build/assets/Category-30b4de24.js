import{L as g}from"./atmosphere-ui-5b718e83.js";import{A as B,B as T,p,o as c,c as u,w as o,u as e,a as r,b as A,e as O,h as w,O as n,i as f,t as F,F as I,g as L,C as N}from"./app-fc313f38.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-87835da0.js";import{_ as E}from"./TransactionSearch-03c1bdf8.js";import{u as M,_ as j,F as R}from"./useServerSearch-8502c7d2.js";import{_ as U,a as q}from"./DraftButtons-d5577951.js";import{_ as v}from"./LogerButton-370ed8f9.js";import{t as z}from"./tableAccountCols-5a984747.js";import{u as G}from"./isMobile-3d69cdae.js";import{u as H}from"./index-975c57c9.js";import"./formatMoney-da670e0a.js";import"./AppIcon-36bb04e5.js";/* empty css                                                */import"./Modal-ca404241.js";/* empty css                                              */import"./LogerInput-2f23c230.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./TransactionsTable-d91fffe7.js";import"./exact-math.node-672740b8.js";import"./NumberHider-888bcf03.js";import"./index-3a6f8c36.js";import"./Progress-f6cc10fb.js";import"./Dropdown-1335b583.js";import"./SectionTitle-df81ac17.js";import"./vue-draggable-next.esm-bundler-25f0042a.js";import"./constants-cb26b0c1.js";import"./WidgetCard-97abea05.js";import"./SectionNav-7e8b141c.js";import"./CustomTable-71b7dae3.js";const J={class:"flex items-center w-full space-x-2"},Ct={__name:"Category",props:{transactions:{type:Object,default:()=>({data:[]})},accounts:{type:Array,default:()=>[]},categories:{type:Array,default(){return[]}},serverSearchOptions:{type:Object,default:()=>({})},accountId:{type:[Number,null]}},setup(l){const m=l,{openTransactionModal:b}=G(),{serverSearchOptions:d,accountId:_}=B(m),{state:i,executeSearch:K}=M(d,{manual:!0});T("selectedAccountId",_);const h=H(),D=p(()=>h.isMobile?E:U),y=p(()=>{var t;return((t=d.value.filters)==null?void 0:t.status)=="draft"}),k=t=>{n.delete(`/transactions/${t.id}`,{onSuccess(){n.reload()}})},x=t=>{n.patch(`/transactions/${t.id}/linked`,{onSuccess(){n.reload()}})},S=t=>{b({transactionData:t})},C={draft:{label:"Drafts",value:"/finance/transactions?filter[status]=draft&relationships=linked"},verified:{label:"Verified",value:"/finance/transactions?"},scheduled:{label:"Scheduled",value:"/finance/transactions?filter[status]=scheduled"}};return(t,s)=>(c(),u(V,{onBack:s[2]||(s[2]=a=>e(n).visit("/finance/transactions")),"show-back-button":!0},{header:o(()=>[r(j,null,{actions:o(()=>[A("div",J,[(c(),O(I,null,w(C,(a,$)=>r(v,{variant:"inverse",class:"",key:$,onClick:P=>e(n).visit(a.value)},{default:o(()=>[f(F(a.label),1)]),_:2},1032,["onClick"])),64)),r(e(g),{class:"w-full h-12 border-none bg-base-lvl-1 text-body",startDate:e(i).dates.startDate,"onUpdate:startDate":s[0]||(s[0]=a=>e(i).dates.startDate=a),endDate:e(i).dates.endDate,"onUpdate:endDate":s[1]||(s[1]=a=>e(i).dates.endDate=a),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"month"},null,8,["startDate","endDate"]),r(v,{variant:"inverse"},{default:o(()=>[f(" Import Transactions ")]),_:1}),y.value?(c(),u(q,{key:0})):L("",!0)])]),_:1})]),default:o(()=>[r(R,{title:"Transactions",accounts:l.accounts},{default:o(()=>[(c(),u(N(D.value),{cols:e(z)(m.accountId),transactions:l.transactions,"server-search-options":e(d),onFindLinked:x,onRemoved:k,onEdit:S},null,40,["cols","transactions","server-search-options"]))]),_:1},8,["accounts"])]),_:1}))}};export{Ct as default};
