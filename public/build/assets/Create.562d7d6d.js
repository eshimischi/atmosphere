import{c as p,b as i,_ as k}from"./atmosphere-ui.es.bb151f48.js";import{W as $,o as c,a as g,d as t,w as n,u as e,F as w,e as U,b as u,H as V,r as N,k as C,N as F,t as B,i as j,f as h}from"./app.e738c84d.js";import{_ as q}from"./AppLayout.d67665c7.js";import"./plugin-vue_export-helper.21dcd24c.js";const I={class:"text-gray-200"},S=u("i",{class:"fa fa-trash"},null,-1),T={props:{meal:{type:Object,default:()=>({name:""})}},emits:["close"],setup(m,{expose:f}){var y;const o=m,l=$({name:(y=o.meal)==null?void 0:y.name,ingredients:o.meal?[...o.meal.ingredients,{}]:[{}]}),_=async()=>{const r=o.meal?"put":"post",s=o.meal?`/meals/${o.meal.id}`:"/meals";l.transform(a=>({...a,ingredients:a.ingredients.filter(b=>b.name)})).submit(r,s,{onSuccess:async()=>{r=="post"&&(await V(),l.reset())}})},x=(r,s)=>{l.ingredients.length==r+1&&s&&l.ingredients.push({unit:"unit",quantity:1,name:""})},v=r=>{l.ingredients.splice(r,1);const s=l.ingredients.length-1;V(()=>{x(s,l.ingredients[s].name)})};return f({submit:_}),(r,s)=>(c(),g("div",I,[t(e(i),{label:"Title"},{default:n(()=>[t(e(p),{modelValue:e(l).name,"onUpdate:modelValue":s[0]||(s[0]=a=>e(l).name=a),rounded:"",class:"text-gray-200 border bg-slate-700 border-slate-800"},null,8,["modelValue"])]),_:1}),t(e(i),{label:"Ingredients"},{default:n(()=>[(c(!0),g(w,null,U(e(l).ingredients,(a,b)=>(c(),g("div",{class:"flex px-2 py-2 overflow-hidden rounded-md bg-slate-600",key:a.id},[t(e(i),{class:"px-4",label:"Qty"},{default:n(()=>[t(e(p),{rounded:"",type:"number",modelValue:a.quantity,"onUpdate:modelValue":d=>a.quantity=d,class:"text-gray-200 border border-none rounded-t-none rounded-b-none bg-slate-700 border-slate-800"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(e(i),{class:"w-full px-4",label:"Name"},{default:n(()=>[t(e(p),{rounded:"",class:"text-gray-200 border border-none rounded-t-none rounded-b-none bg-slate-700 border-slate-800",modelValue:a.name,"onUpdate:modelValue":[d=>a.name=d,d=>x(b,d)]},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(e(i),{class:"px-4",label:"Unit"},{default:n(()=>[t(e(p),{rounded:"",modelValue:a.unit,"onUpdate:modelValue":d=>a.unit=d,class:"text-gray-200 border border-none rounded-t-none rounded-b-none bg-slate-700 border-slate-800"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(e(i),{label:"Actions"},{default:n(()=>[t(e(k),{type:"danger",class:"items-center h-10",rounded:"",onClick:d=>v(b)},{default:n(()=>[S]),_:2},1032,["onClick"])]),_:2},1024)]))),128))]),_:1})]))}},E={class:"flex justify-between"},L=h(" Meal Planner "),O={key:0},W=h("Editing "),A={class:"font-bold"},D=h(" Save "),H={class:"py-12"},M={class:"px-6 mx-auto max-w-7xl"},z={props:{meals:{type:[Object,null],default:null}},setup(m){const f=N(null),o=()=>{f.value.submit()};return(l,_)=>(c(),C(q,null,{header:n(()=>[u("div",E,[u("div",null,[t(e(F),{href:"/meals",class:"block text-xl font-semibold leading-tight text-pink-400"},{default:n(()=>[L]),_:1}),m.meals?(c(),g("p",O,[W,u("span",A,B(m.meals.name),1)])):j("",!0)]),u("div",null,[t(e(k),{class:"h-10 text-white bg-pink-400",rounded:"",onClick:_[0]||(_[0]=x=>o())},{default:n(()=>[D]),_:1})])])]),default:n(()=>[u("div",H,[u("div",M,[t(T,{ref_key:"mealForm",ref:f,meal:m.meals},null,8,["meal"])])])]),_:1}))}};export{z as default};
