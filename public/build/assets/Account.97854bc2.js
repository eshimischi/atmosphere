import{b as I,E as T}from"./atmosphere-ui.87ba2c0a.js";import{C as d,A as k,B as w,q as $,o as p,g as h,b as c,a as l,d as A,c as O,h as E,i as v,t as N,F as B,f as n,e as F,a6 as f}from"./app.d8e74fa3.js";import{_ as M,a as y}from"./AppLayout.9d561a06.js";import"./WidgetCard.e29b5449.js";/* empty css                                              */import{i as V,I as j,_ as P,a as R}from"./DraftButtons.46e52ea7.js";import{p as L}from"./index.0c0b7522.js";import{s as b}from"./index.bb0ccf69.js";import{a6 as U,a7 as W}from"./naiveui.0ad5ca37.js";import{u as q,_ as H,F as Y}from"./useServerSearch.b930cc90.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./Modal.36144344.js";import"./LogerInput.c4e88f46.js";import"./SectionTitle.5007996d.js";import"./CustomTable.a87f8f94.js";import"./formatMoney.a91b934f.js";import"./Dropdown.8b34b419.js";import"./SectionNav.164c7b94.js";const z={WITHDRAW:"outflow",DEPOSIT:"inflow"},G=[{label:"Date",name:"date",width:200,class:"text-center",headerClass:"text-center",render(t){const e=L(t.date),o=V(b(e),b(new Date));return d("div",{class:o?"text-danger":"text-info cursor-pointer"},U(e,"dd MMM, yyyy"))}},{label:"Payee",name:"payee",width:400,class:"w-full",render(t){var e,o;try{const s=t.account_id==t.account_from.id?t.account_to:t.account_from,m=()=>[d("div",{class:"font-bold"},`${s==null?void 0:s.name}`),d(j,{class:"fa fa-right-left"})];return(o=(e=t.payee)==null?void 0:e.name)!=null?o:d("div",{class:"flex justify-between items-center text-body-1 h-4"},m())}catch{return""}}},{label:"Category",name:"category",render(t){var e;return(e=t.category)==null?void 0:e.name}},{label:"Description",name:"description",width:300},{label:"Type",name:"direction",width:300,class:"text-center",headerClass:"text-center",render(t){return z[t.direction]}},{label:"Amount",name:"total",type:"custom",class:"text-right",headerClass:"text-right"},{label:"Status",name:"status",width:200,class:"py-1 flex items-center justify-center",headerClass:"text-center",render(t){const e={draft:"secondary",planned:"warning",verified:"success"};return()=>d(I,{type:e[t.status]},()=>t.status)}},{label:"",name:"actions",width:300,type:"custom",class:"text-right"}],J={class:"flex items-center w-full space-x-2"},K=v(" Import Transactions "),bt={__name:"Account",props:{transactions:{type:Object,default:()=>({data:[]})},accounts:{type:Array,default:()=>[]},categories:{type:Array,default(){return[]}},serverSearchOptions:{type:Object,default:()=>({})},accountId:{type:[Number,null]}},setup(t){const e=t,{openTransferModal:o}=W(),{serverSearchOptions:s,accountId:m}=k(e),{state:u,executeSearch:Q}=q(s);w("selectedAccountId",m);const x=$(()=>{var a;return((a=s.value.filters)==null?void 0:a.status)=="draft"}),D=a=>{f.Inertia.delete(`/transactions/${a.id}`,{onSuccess(){f.Inertia.reload()}})},_=a=>{f.Inertia.patch(`/transactions/${a.id}/linked`,{onSuccess(){f.Inertia.reload()}})},g=a=>{o({transactionData:a})},S={draft:{label:"Drafts",value:"/finance/transactions?filter[status]=draft&relationships=linked"},verified:{label:"Verified",value:"/finance/transactions?"},scheduled:{label:"Scheduled",value:"/finance/transactions?filter[status]=scheduled"}};return(a,i)=>(p(),h(M,{onBack:i[2]||(i[2]=r=>a.$inertia.visit(a.route("finance"))),"show-back-button":!0},{header:c(()=>[l(H,null,{actions:c(()=>[A("div",J,[(p(),O(B,null,E(S,(r,C)=>l(y,{variant:"inverse",class:"",key:C,onClick:X=>a.$inertia.visit(r.value)},{default:c(()=>[v(N(r.label),1)]),_:2},1032,["onClick"])),64)),l(n(T),{class:"w-full h-12 border-none bg-base-lvl-1 text-body",startDate:n(u).dates.startDate,"onUpdate:startDate":i[0]||(i[0]=r=>n(u).dates.startDate=r),endDate:n(u).dates.endDate,"onUpdate:endDate":i[1]||(i[1]=r=>n(u).dates.endDate=r),controlsClass:"bg-transparent text-body hover:bg-base-lvl-1","next-mode":"month"},null,8,["startDate","endDate"]),l(y,{variant:"inverse"},{default:c(()=>[K]),_:1}),n(x)?(p(),h(P,{key:0})):F("",!0)])]),_:1})]),default:c(()=>[l(Y,{title:"Transactions",accounts:t.accounts},{default:c(()=>[l(R,{cols:n(G),transactions:t.transactions,"server-search-options":n(s),onFindLinked:_,onRemoved:D,onEdit:g},null,8,["cols","transactions","server-search-options"])]),_:1},8,["accounts"])]),_:1}))}};export{bt as default};
