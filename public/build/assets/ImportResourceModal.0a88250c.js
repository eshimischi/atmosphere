import{_ as C}from"./Modal.1586865f.js";import{r as h,u as I,q as v,o as b,c as x,d as s,t as y,f as l,K as S,e as $,g as N,b as m,a as u,i as w}from"./app.ed3e752b.js";import{a as g}from"./atmosphere-ui.es.c3e31e0f.js";import{N as R}from"./Select.c33131e1.js";const B={class:"w-full h-full absolute z-20 px-5 py-2 bg-transparent flex items-center justify-center"},V={for:"fileInput",class:"cursor-pointer text-base-300 font-bold text-sm"},F={key:0,class:"text-red-300"},z={__name:"ImportHolder",props:{placeholder:{type:String,default:"Drag a CSV file here or upload via the button to import your transactions"},endpoint:{type:String,default:"/financial/import"}},emits:["uploaded","error","canceled"],setup(a,{expose:d,emit:r}){const n=a,o=h(),i=()=>{var t;(t=o.value)==null||t.click()},e=I({file:null}),_=v(()=>e.file?e.file.name:n.placeholder),c=t=>{e.file=t.target.files.length?t.target.files[0]:null},p=()=>{o.value.value=null,e.file=null},f=async()=>{if(!e.file){e.setError("file","You have to submit a file");return}e.post(n.endpoint,{onSuccess(){r("uploaded"),p()}})},k=v(()=>{var t;return{width:`${((t=e.progress)==null?void 0:t.percentage)||0}%`||"0px"}});return d({processImport:f}),(t,j)=>(b(),x("div",{class:"h-32 w-full relative rounded-md flex items-end justify-center border-dashed border border-primary cursor-pointer hover:bg-base-lvl-2 transition",role:"button",onClick:i,relative:""},[s("div",B,[s("input",{name:"fileInput",type:"file",ref_key:"fileInputRef",ref:o,class:"hidden",onChange:c},null,544),s("label",V,y(l(_)),1)]),s("div",{class:"absolute h-full flex z-10 bg-primary/30 w-full",style:S(l(k))},null,4),l(e).hasErrors?(b(),x("small",F,y(l(e).errors.file),1)):$("",!0)]))}},D={class:"pb-4 bg-base-lvl-1 sm:p-6 sm:pb-4 text-body"},E={class:"px-6 py-4 space-x-3 text-right bg-base"},H=w(" Cancel "),T=w(" Import "),M={__name:"ImportResourceModal",props:{show:{default:!1},maxWidth:{default:"2xl"},closeable:{default:!0}},emits:["update:show"],setup(a,{emit:d}){const r=h(),n=()=>{r.value.processImport()},o=()=>{d("update:show",!1)},i=[{value:"/finance/import-budget",label:"Budget"},{value:"/finance/import",label:"Transactions"}],e=h(i[1].value);return(_,c)=>(b(),N(C,{show:a.show,"max-width":a.maxWidth,closeable:a.closeable,onClose:o},{default:m(({close:p})=>[u(l(R),{value:e.value,"onUpdate:value":c[0]||(c[0]=f=>e.value=f),options:i},null,8,["value"]),s("div",D,[u(z,{ref_key:"importHolderRef",ref:r,onUploaded:o,endpoint:e.value},null,8,["endpoint"])]),s("div",E,[u(l(g),{type:"secondary",onClick:p,rounded:"",class:"h-10"},{default:m(()=>[H]),_:2},1032,["onClick"]),u(l(g),{class:"text-white bg-primary h-10",onClick:n,rounded:""},{default:m(()=>[T]),_:1})])]),_:1},8,["show","max-width","closeable"]))}};export{M as _};
