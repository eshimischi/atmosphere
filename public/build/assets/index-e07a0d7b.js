import{C as D,D as j,B as q,L as K}from"./chart-eb93a947.js";import{d as P,_ as O,L,$ as R,r as U,p as $,W as A,J,a0 as b,a1 as w}from"./app-114b751b.js";const B={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},T={type:{type:String,required:!0},...B},W=R[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function c(t){return w(t)?b(t):t}function _(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return w(e)?new Proxy(t,{}):t}function k(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function I(t,e){t.labels=e}function M(t,e,a){const o=[];t.datasets=e.map(s=>{const n=t.datasets.find(i=>i[a]===s[a]);return!n||!s.data||o.includes(n)?{...s}:(o.push(n),Object.assign(n,s),n)})}function z(t,e){const a={labels:[],datasets:[]};return I(a,t.labels),M(a,t.datasets,e),a}const E=P({props:T,setup(t,e){let{expose:a}=e;const o=U(null),s=O(null);a({chart:s});const n=()=>{if(!o.value)return;const{type:r,data:f,options:y,plugins:p,datasetIdKey:v}=t,g=z(f,v),u=_(g,f);s.value=new D(o.value,{type:r,data:u,options:{...y},plugins:p})},i=()=>{const r=b(s.value);r&&(r.destroy(),s.value=null)},d=r=>{r.update(t.updateMode)};return $(n),A(i),J([()=>t.options,()=>t.data],(r,f)=>{let[y,p]=r,[v,g]=f;const u=b(s.value);if(!u)return;let h=!1;if(y){const l=c(y),x=c(v);l&&l!==x&&(k(u,l),h=!0)}if(p){const l=c(p.labels),x=c(g.labels),m=c(p.datasets),S=c(g.datasets);l!==x&&(I(u.config.data,l),h=!0),m&&m!==S&&(M(u.config.data,m,t.datasetIdKey),h=!0)}h&&d(u)},{deep:!0}),()=>L("canvas",{ref:o})}});function C(t,e){return D.register(e),P({props:B,setup(a,o){let{expose:s}=o;const n=O(null),i=d=>{n.value=d==null?void 0:d.chart};return s({chart:n}),()=>L(E,W({ref:i},{type:t,...a}))}})}const H=C("bar",q),N=C("doughnut",j),Q=C("line",K);export{H as B,N as D,Q as L};
