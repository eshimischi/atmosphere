import{D as $,o as b,a as x,b as e,d as n,f as p,t as d,y as B,c as y,u as a,K as C,r as N,k as A,w as r,l as h}from"./app.e738c84d.js";import{_ as f}from"./atmosphere-ui.es.bb151f48.js";import{_ as V}from"./AppLayout.d67665c7.js";import{_ as k}from"./NumberHider.2bb87ca5.js";import{_,c as F,p as I,t as D}from"./formatters.2b4e22e7.js";import{_ as O}from"./SectionTitle.75e670bb.js";import{u as j}from"./useSelects.b4e4d8e6.js";import{f as v}from"./formatMoney.228f3112.js";import{_ as z}from"./FinanceTemplate.cd0f42da.js";import"./plugin-vue_export-helper.21dcd24c.js";import"./Modal.40de7d4e.js";import"./LogerInput.2a218089.js";import"./DatePicker.51cc981d.js";import"./index.2e08e1eb.js";import"./index.a95d9f5e.js";import"./Suffix.5aad8092.js";import"./Icon.f03f38c6.js";import"./Select.8b95d733.js";import"./format-length.7f3135aa.js";import"./exact-math.node.d84085b5.js";import"./Progress.31470334.js";const G=t=>{const s=$("openTransactionModal",(...i)=>{var c;(c=t==null?void 0:t.value)==null||c.openTransactionModal.apply(null,i)});return{handleEdit:$("openTransactionModalForEdit",(...i)=>{var c;(c=t==null?void 0:t.value)==null||c.openTransactionModalForEdit.apply(null,i)}),openModalFor:s}},H={class:"relative text-lg font-bold text-blue-400"},L={class:"ml-5 text-gray-100"},q={class:"font-bold"},T={props:{value:{type:String},title:{type:String},subtitle:{type:String},hidden:{type:Boolean}},setup(t){const s="flex bg-gray-100 items-center rounded-md px-5 py-4";return(l,i)=>(b(),x("div",{class:B(s)},[e("div",H,[n(k),p(" "+d(t.value),1)]),e("div",L,[e("p",q,d(t.title),1),e("span",null,d(t.subtitle),1)])]))}},K={class:"mt-2 text-4xl font-bold relative"},Z={class:"px-5 py-2 mt-4 bg-gray-700 bg-opacity-25 rounded-3xl"},J={class:"font-bold"},Q={props:{value:{type:String},title:{type:String},varianceTitle:{type:String},variance:{type:String}},setup(t){return(s,l)=>(b(),x("div",{class:"px-5 py-5 mx-auto text-white bg-pink-400 cursor-pointer rounded-xl",onClick:l[0]||(l[0]=i=>s.$emit("click"))},[e("h4",null,d(t.title),1),e("div",K,[n(k),p(" "+d(t.value),1)]),e("div",Z,[p(d(t.varianceTitle)+": ",1),e("span",J,d(t.variance)+"%",1)])]))}},U={class:"h-8 w-full rounded-b-lg bg-slate-600 relative overflow-hidden"},W={class:"w-full h-full flex items-center justify-center absolute text-white z-20"},X={props:{goal:{type:Number},current:{type:Number,default:0}},setup(t){const s=t,l=y(()=>Math.floor(s.current/s.goal*100)),i=y(()=>({width:`${l.value||0}%`||"0px"}));return(c,g)=>(b(),x("div",U,[e("div",W,d(a(l))+" % of "+d(a(v)(t.goal)),1),e("div",{class:"absolute h-full flex z-10 bg-pink-400 w-full",style:C(a(i))},null,4)]))}},Y={class:"flex flex-wrap md:flex-nowrap md:space-x-2"},P={class:"w-full md:w-7/12"},R={class:"mt-5"},tt=p("Summary"),et={class:"flex flex-wrap justify-between px-2 py-5 mt-3 overflow-hidden border shadow-sm border-slate-700 bg-slate-600 rounded-xl"},at={class:"mx-auto space-y-2"},st=p(" Goals "),nt={class:"w-full md:w-5/12"},ot=e("span",null," Go to Budget ",-1),lt=e("i",{class:"fa fa-chevron-right ml-2"},null,-1),it={class:"flex flex-wrap mt-5 md:flex-nowrap md:space-x-2"},rt={class:"w-full md:w-7/12"},ct=e("i",{class:"fa fa-plus"},null,-1),dt=p(" Add planned payment"),ut={class:"w-full md:w-5/12"},pt=e("i",{class:"fa fa-plus"},null,-1),mt=p(" Add transaction"),It={props:{user:{type:Object,required:!0},planned:{type:Array,default(){return[]}},topExpenses:{type:Array,default(){return[]}},budgetTotal:{type:Number,default:0},income:{type:Number,default:0},lastMonthIncome:{type:Number,default:0},transactionTotal:{type:Number,default:0},lastMonthExpenses:{type:Number,default:0},transactions:{type:Array,default(){return[]}},categories:{type:Array,default(){return[]}},accounts:{type:Array,default(){return[]}}},setup(t){const s=t,l=N(null),{openModalFor:i,handleEdit:c}=G(l),{categoryOptions:g}=j();g(s.categories,"accounts","categoryOptions"),g(s.accounts,"accounts","accountsOptions");const w=(u,o)=>o===0?0:((u-o)/o*100).toFixed(2),E=y(()=>w(s.income,s.lastMonthIncome)),M=y(()=>w(s.transactionTotal,s.lastMonthExpenses)||0),S=u=>{h.Inertia.put(`/transactions/${u.id}/mark-as-paid`,{},{onSuccess:()=>{h.Inertia.reload()}})};return(u,o)=>(b(),A(V,null,{default:r(()=>[n(z,{title:"Finance",accounts:t.accounts,ref_key:"financeTemplateRef",ref:l},{default:r(()=>[e("section",null,[e("div",Y,[e("div",P,[e("div",R,[n(O,{type:"secondary"},{default:r(()=>[tt]),_:1})]),e("div",et,[e("div",at,[n(T,{class:"text-gray-100 bg-slate-500",title:"Income",hidden:u.hasHiddenValues,value:a(v)(t.income),subtitle:`Last Month: ${a(E)}%`},null,8,["hidden","value","subtitle"]),n(T,{class:"text-gray-100 bg-slate-500",title:"Savings",value:a(v)("10000"),hidden:u.hasHiddenValues,subtitle:"Total: 150,000.00"},null,8,["value","hidden"]),n(a(f),{onClick:o[0]||(o[0]=m=>u.$inertia.visit("/goals")),class:"w-full h-10 mt-auto text-white bg-pink-500 rounded-md"},{default:r(()=>[st]),_:1})]),n(Q,{onClick:o[1]||(o[1]=m=>u.$inertia.visit("/finance/transactions")),title:"Expenses",value:a(v)(t.transactionTotal),"variance-title":"Last month variance",variance:a(M)},null,8,["value","variance"])])]),e("div",nt,[n(_,{"table-label":"Budget",class:"pt-3 mt-5","table-class":"overflow-auto text-sm rounded-t-lg shadow-md bg-slate-600",transactions:t.topExpenses,parser:a(F),onEdit:a(c)},{action:r(()=>[n(a(f),{class:"text-pink-500 items-center flex",onClick:o[2]||(o[2]=m=>a(h.Inertia).visit("/budgets"))},{default:r(()=>[ot,lt]),_:1})]),_:1},8,["transactions","parser","onEdit"]),n(X,{goal:t.budgetTotal,current:t.transactionTotal,class:"border-t"},null,8,["goal","current"])])]),e("div",it,[e("div",rt,[n(_,{"table-label":"My payments",class:"pt-3 mt-5","table-class":"border rounded-lg shadow-md bg-slate-600",onPaidClicked:S,"allow-mark-as-paid":!0,transactions:t.planned,parser:a(I)},{action:r(()=>[n(a(f),{class:"text-pink-500",onClick:o[3]||(o[3]=m=>a(i)("transaction"))},{default:r(()=>[ct,dt]),_:1})]),_:1},8,["transactions","parser"])]),e("div",ut,[n(_,{"table-label":"Transactions",class:"pt-3 mt-5","table-class":"border rounded-lg shadow-md bg-slate-600",transactions:t.transactions,parser:a(D),onEdit:a(c)},{action:r(()=>[n(a(f),{class:"text-pink-500",onClick:o[4]||(o[4]=m=>a(i)())},{default:r(()=>[pt,mt]),_:1})]),_:1},8,["transactions","parser","onEdit"])])])])]),_:1},8,["accounts"])]),_:1}))}};export{It as default};
